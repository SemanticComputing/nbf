!function(){"use strict";angular.module("facetApp",["ui.router","seco.facetedSearch","ngTable","angular.filter","ngAnimate","ui.bootstrap","infinite-scroll","uiGmapgoogle-maps","rzModule"]).constant("_",_).constant("google",google).constant("RESULTS_PER_PAGE",25).constant("PAGES_PER_QUERY",1).value("SPARQL_ENDPOINT_URL","https://ldf.fi/nbf/sparql").run(["authStorage",function(e){e.init()}]).run(["google",function(e){e.charts.load("current",{packages:["corechart","line"]})}]).config(["$urlMatcherFactoryProvider",function(e){e.strictMode(!1)}]).config(["$urlRouterProvider",function(e){e.when("","/ruudukko")}]).service("authInterceptor",["$q","$state",function(e,t){this.responseError=function(a){return 401==a.status&&t.go("login"),e.reject(a)}}]).config(["$httpProvider",function(e){e.interceptors.push("authInterceptor")}]).config(["$stateProvider",function(e){e.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginController",controllerAs:"vm"}).state("person",{abstract:!0,url:"/:personId",templateUrl:"views/person.html"}).state("person.detail",{url:"",templateUrl:"views/detail.html",controller:"DetailController",controllerAs:"vm"}).state("person.map",{url:"/kartta",templateUrl:"views/map.html",controller:"MapController",controllerAs:"vm"}).state("place",{url:"/place/:placeId",templateUrl:"views/place.html",controller:"PlaceController",controllerAs:"vm"}).state("title",{url:"/title/:titleId",templateUrl:"views/title.html",controller:"TitleController",controllerAs:"vm"}).state("table",{url:"/lista",templateUrl:"views/table.html",controller:"TableController",controllerAs:"vm"}).state("groupmap",{url:"/joukkokartta",templateUrl:"views/groupmap.html",controller:"GroupmapController",controllerAs:"vm"}).state("cards",{url:"/ruudukko",templateUrl:"views/cards.html",controller:"CardsController",controllerAs:"vm"}).state("nlp",{url:"/nlp",abstract:!0,templateUrl:"views/nlp.html"}).state("nlp.statistics",{url:"",templateUrl:"views/nlp.statistics.html",controller:"NlpStatisticsController",controllerAs:"vm"}).state("nlp.comparison",{url:"/vertaa",abstract:!0,templateUrl:"views/nlp.comparison.html"}).state("nlp.comparison.sides",{url:"",views:{"left@nlp.comparison":{templateUrl:"views/nlp.comparison.left.html",controller:"NlpComparisonController",controllerAs:"vm"},"right@nlp.comparison":{templateUrl:"views/nlp.comparison.right.html",controller:"NlpComparisonController",controllerAs:"vm"}}}).state("visualizations",{abstract:!0}).state("visualizations.visu",{url:"/visualisointi",templateUrl:"views/visu.html",controller:"VisuController",controllerAs:"vm"}).state("visualizations.visu2",{url:"/visualisointi2",templateUrl:"views/visu2.html",controller:"VisuController2",controllerAs:"vm"})}])}(),function(){"use strict";angular.module("facetApp").service("authStorage",["$window","$http",function(e,t){function a(a){return t.defaults.headers.common.Authorization="Basic "+a,e.sessionStorage.setItem("sparqlAuthToken",a)}function i(){return e.sessionStorage.getItem("sparqlAuthToken")}this.init=function(){var e=i();e&&a(e)},this.setToken=a,this.getToken=i,this.clearToken=function(){e.sessionStorage.removeItem("sparqlAuthToken")}}])}(),function(){"use strict";function e(e,t,a,i){this.login=function(e,s){a.clearToken();var n=btoa(e+":"+s),o={headers:{Authorization:"Basic "+n}};return t.get(i+"?query=ASK{}",o).then(function(){return a.setToken(n),!0}).catch(function(){return!1})}}angular.module("facetApp").service("loginService",e),e.$inject=["$q","$http","authStorage","SPARQL_ENDPOINT_URL"]}(),function(){"use strict";angular.module("facetApp").filter("castArray",["_",function(e){return function(t){return e.castArray(t)}}])}(),function(){"use strict";function e(e,t,a){s.prototype.postProcess=function(a){return a.forEach(function(a){if(a.hasImage=!!a.images,a.images=a.images?t.castArray(a.images):["images/person_placeholder.cd371769.svg"],a.description&&(a.description=e.trustAsHtml(a.description)),a.source_paragraph&&(a.source_paragraph=e.trustAsHtml(a.source_paragraph)),a.lead_paragraph&&(a.lead_paragraph=e.trustAsHtml(a.lead_paragraph)),a.norssi&&(a.norssi=a.norssi.replace("http://ldf.fi/norssit/","")),a.fennica){a.fennica.constructor!==Array&&(a.fennica=[a.fennica]);for(var i=0;i<a.fennica.length;i++)a.fennica[i]="http://data.nationallibrary.fi/"+a.fennica[i].replace("http://urn.fi/URN:NBN:fi:","").replace(/:/g,"/")}a.givenName||(a.givenName=""),a.familyName||(a.familyName=""),a.givenName.constructor===Array&&2==a.givenName.length&&(a.givenName=a.givenName[0]+" ja "+a.givenName[1])}),a};var i=Object.getPrototypeOf(a);return s.prototype=angular.extend({},i,s.prototype),new s;function s(){this.objectClass=Object}}angular.module("facetApp").factory("personMapperService",e),e.$inject=["$sce","_","objectMapperService"]}(),function(){"use strict";function e(e,t,a){s.prototype.postProcess=function(e){return e};var i=Object.getPrototypeOf(a);return s.prototype=angular.extend({},i,PersonMapper.prototype),new s;function s(){this.objectClass=Object}}angular.module("facetApp").factory("eventMapperService",e),e.$inject=["$sce","_","objectMapperService"]}(),function(){"use strict";function e(e,t){this.getFacets=function(){var t=angular.copy(a);return e.when(t)},this.getFacetOptions=function(){return angular.copy(i)};var a={entryText:{facetId:"entryText",graph:"<http://ldf.fi/nbf/people>",name:"Haku",enabled:!0},dataset:{facetId:"dataset",predicate:"<http://purl.org/dc/terms/source>",name:"Tietokanta",chart:!0,enabled:!0},link:{facetId:"link",choices:[{id:"wikipedia",pattern:"?id <http://ldf.fi/nbf/wikipedia> [] .",label:"Wikipedia"},{id:"wikidata",pattern:"?id <http://ldf.fi/nbf/wikidata> [] .",label:"Wikidata"},{id:"fennica",pattern:"?id <http://ldf.fi/nbf/fennica> [] .",label:"Fennica - Suomen kansallisbibliografia"},{id:"sotasampo",pattern:"?id <http://ldf.fi/nbf/warsampo> [] .",label:"Sotasampo"},{id:"norssit",pattern:"?id <http://ldf.fi/nbf/norssi> [] .",label:"Norssit"},{id:"kirjasampo",pattern:"?id <http://ldf.fi/nbf/kirjasampo> [] . ",label:"Kirjasampo"},{id:"blf",pattern:"?id <http://ldf.fi/nbf/blf> [] .",label:"BLF"},{id:"ulan",pattern:"?id <http://ldf.fi/nbf/ulan> [] .",label:"ULAN"},{id:"viaf",pattern:"?id <http://ldf.fi/nbf/viaf> [] .",label:"VIAF"},{id:"genicom",pattern:"?id <http://ldf.fi/nbf/genicom> [] .",label:"Geni.com"},{id:"website",pattern:"?id <http://ldf.fi/nbf/website> [] .",label:"Kotisivu"},{id:"eduskunta",pattern:"?id <http://ldf.fi/nbf/eduskunta> [] .",label:"Eduskunta"}],chart:!0,enabled:!0,name:"Linkitetyt tietokannat"},period:{facetId:"period",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_period>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Ajanjakso",chart:!0,enabled:!0},familyName:{facetId:"familyName",predicate:"<http://www.w3.org/2008/05/skos-xl#prefLabel>/<http://schema.org/familyName>",chart:!0,name:"Sukunimi"},author:{facetId:"author",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_biography>/<http://schema.org/author>",chart:!0,name:"Kirjoittaja"},birthYear:{facetId:"birthYear",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>/<http://ldf.fi/nbf/time>/<http://vocab.getty.edu/ontology#estStart>",name:"Synnyinaika",enabled:!0},place:{facetId:"place",predicate:"<http://xmlns.com/foaf/0.1/focus>/(^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>|^<http://www.cidoc-crm.org/cidoc-crm/P100_was_death_of>)/<http://ldf.fi/nbf/place>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Paikkakunta",chart:!0,enabled:!0},deathYear:{facetId:"birthYear",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P100_was_death_of>/<http://ldf.fi/nbf/time>",name:"Kuolinaika",enabled:!0},title:{facetId:"title",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://ldf.fi/schema/bioc/inheres_in>/<http://ldf.fi/nbf/has_title>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Arvo, ammatti tai toiminta",hierarchy:"<http://www.w3.org/2004/02/skos/core#broader>",depth:3,chart:!0,enabled:!0},company:{facetId:"company",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://ldf.fi/schema/bioc/inheres_in>/<http://ldf.fi/nbf/related_company>",name:"Yritys tai yhteis√∂",chart:!0,enabled:!0},category:{facetId:"category",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_category>",name:"Toimiala",chart:!0,enabled:!0},gender:{facetId:"gender",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/sukupuoli>",name:"Sukupuoli",chart:!0,enabled:!0}},i={endpointUrl:{endpointUrl:t,usePost:!0}.endpointUrl,rdfClass:"<http://ldf.fi/nbf/PersonConcept>",constraint:"?id <http://www.w3.org/2008/05/skos-xl#prefLabel>/<http://www.w3.org/2004/02/skos/core#prefLabel> ?familyName . ?id <http://ldf.fi/nbf/ordinal> ?ordinal . ",preferredLang:"fi",noSelectionString:"-- Ei valintaa --"}}angular.module("facetApp").service("facetService",e),e.$inject=["$q","SPARQL_ENDPOINT_URL"]}(),function(){"use strict";function e(e,t,a,i,s,n,o,r){this.getResults=function(e){return u.getResults(e,function(){var e,i=t.search().sortBy;a.isString(i)||(i="?ordinal");e="?ordinal"===i?t.search().desc?i:"DESC("+i+")":t.search().desc?"DESC("+i+")":i;return"?ordinal"===i?e:e+" ?ordinal"}())},this.getFacets=i.getFacets,this.getFacetOptions=i.getFacetOptions,this.updateSortBy=function(e){(t.search().sortBy||"?ordinal")===e&&t.search("desc",!t.search().desc||null);t.search("sortBy",e)},this.getSortClass=function(e,a){var i=t.search().sortBy||"?ordinal",s=a?"glyphicon-sort-by-order":"glyphicon-sort-by-alphabet";if("?ordinal"===e){if(i===e)return t.search().desc?s:s+"-alt"}else if(i===e)return t.search().desc?s+"-alt":s},this.getPerson=function(t){var a=l+c,i="VALUES ?idorg { <"+t+"> } . ?idorg owl:sameAs* ?id . ";return m.getObjects(a.replace("<RESULT_SET>",i)).then(function(t){return t.length?t[t.length-1]:e.reject("Not found")})},this.getSimilar=function(e){var t=l+d,a="VALUES ?id { <"+e+"> } . ";return m.getObjectsNoGrouping(t.replace("<RESULT_SET>",a)).then(function(e){return e})},this.getBios=function(e){var t=l+p,a="VALUES ?id { <"+e+"> } . ";return m.getObjectsNoGrouping(t.replace("<RESULT_SET>",a)).then(function(e){return e})};var l=" PREFIX owl: <http://www.w3.org/2002/07/owl#>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX bioc: <http://ldf.fi/schema/bioc/>  PREFIX nbf: <http://ldf.fi/nbf/>  PREFIX categories:\t<http://ldf.fi/nbf/categories/>  PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> ",c=' SELECT DISTINCT * WHERE {  {     <RESULT_SET>   }   ?id skosxl:prefLabel ?plabel .   \t\tOPTIONAL { ?plabel schema:givenName ?givenName . }  \t\tOPTIONAL { ?plabel schema:familyName ?familyName . }   OPTIONAL { ?id nbf:viaf ?viaf . }  OPTIONAL { ?id nbf:ulan ?ulan . }  OPTIONAL { ?id nbf:wikidata ?wikidata . }  OPTIONAL { ?id nbf:wikipedia ?wikipedia . }  OPTIONAL { ?id nbf:fennica ?fennica . }  OPTIONAL { ?id nbf:blf ?blf . }  OPTIONAL { ?id nbf:website ?website . }  OPTIONAL { ?id nbf:eduskunta ?eduskunta . }  OPTIONAL { ?id nbf:warsampo ?warsampo . }  OPTIONAL { ?id nbf:norssi ?norssi . }  OPTIONAL { ?id nbf:kirjasampo ?kirjasampo . }  OPTIONAL { ?id nbf:website ?website . }  OPTIONAL { ?id nbf:genicom ?genicom . }  OPTIONAL { ?id nbf:genitree ?genitree . }  OPTIONAL { ?id schema:relatedLink ?kansallisbiografia . }  OPTIONAL { { ?id bioc:has_family_relation [   \t\tbioc:inheres_in ?relative__id ;   \t\ta/skos:prefLabel ?relative__type ] . } \t\tUNION { ?relative__id bioc:has_family_relation [   \t\tbioc:inheres_in ?id ;   \t\tbioc:inverse_role/skos:prefLabel ?relative__type ] . }   \t\tFILTER (LANG(?relative__type)="fi")   \t\t?relative__id skosxl:prefLabel ?relative__label .   \t\tOPTIONAL { ?relative__label schema:familyName ?relative__familyName }   \t\tOPTIONAL { ?relative__label schema:givenName ?relative__givenName }   \t\tBIND (REPLACE(CONCAT( COALESCE(?relative__givenName,"") ," ", COALESCE(?relative__familyName,"")),"[(][^)]+[)]\\\\s*","") AS ?relative__name)    }   OPTIONAL { ?id foaf:focus ?prs .   \t\tOPTIONAL { ?prs ^crm:P98_brought_into_life ?bir .   \t\t\tOPTIONAL { ?bir nbf:place ?birthPlace . filter (isliteral(?birthPlace)) }   \t\t\tOPTIONAL { ?bir nbf:time/skos:prefLabel ?birthDate . }\t\t}   \t\tOPTIONAL { ?prs ^crm:P100_was_death_of ?dea . \t\t\tOPTIONAL { ?dea nbf:time/skos:prefLabel ?deathDate . }  \t\t\tOPTIONAL { ?dea nbf:place ?deathPlace . filter (isliteral(?deathPlace)) }\t\t}   \t\tOPTIONAL { ?prs schema:image ?images . }  \t\tOPTIONAL { ?prs ^bioc:inheres_in ?occupation_id .   \t\t\t?occupation_id a nbf:Occupation ; skos:prefLabel ?occupation }  \t\tOPTIONAL { ?prs nbf:has_category ?category . }  } }',p='SELECT DISTINCT * WHERE { { <RESULT_SET> } ?id owl:sameAs*|^owl:sameAs ?prs . ?prs foaf:focus/nbf:has_biography ?bio .  OPTIONAL { ?bio dct:source ?source . ?source skos:prefLabel ?database }  OPTIONAL { ?bio nbf:authors ?author_text }  OPTIONAL { ?bio schema:dateCreated ?created }  OPTIONAL { ?bio schema:dateModified ?modified }  OPTIONAL { ?bio schema:relatedLink ?link }  OPTIONAL { ?bio nbf:has_paragraph [ nbf:id "0"^^xsd:integer ; nbf:content ?lead_paragraph ] }  OPTIONAL { ?bio nbf:has_paragraph [ nbf:id "1"^^xsd:integer ; nbf:content ?description    ] }  OPTIONAL { ?bio nbf:has_paragraph [ nbf:id "2"^^xsd:integer ; nbf:content ?family_paragraph ] }  OPTIONAL { ?bio nbf:has_paragraph [ nbf:id "3"^^xsd:integer ; nbf:content ?parent_paragraph ] }  OPTIONAL { ?bio nbf:has_paragraph [ nbf:id "4"^^xsd:integer ; nbf:content ?spouse_paragraph ] }  OPTIONAL { ?bio nbf:has_paragraph [ nbf:id "5"^^xsd:integer ; nbf:content ?child_paragraph  ] }  OPTIONAL { ?bio nbf:has_paragraph [ nbf:id "6"^^xsd:integer ; nbf:content ?medal_paragraph  ] }  OPTIONAL { ?bio nbf:has_paragraph [ nbf:id "7"^^xsd:integer ; nbf:content ?source_paragraph ] }} ORDER BY str(?source)',d='SELECT DISTINCT ?prs ?label WHERE {   { <RESULT_SET> }  {     ?dst bioc:relates_to ?id ; bioc:relates_to ?prs ; bioc:value ?val .     } UNION {       ?dst bioc:relates_to ?id ; bioc:relates_to ?idX ; bioc:value ?valX .       ?dst2 bioc:relates_to ?idX ; bioc:relates_to ?prs ; bioc:value ?val2 .         BIND (?valX+?val2 AS ?val)   } UNION {      ?dst bioc:relates_to ?id ; bioc:relates_to ?idX ; bioc:value ?valX .     ?dst2 bioc:relates_to ?idX ; bioc:relates_to ?idY ; bioc:value ?valY .         ?dst3 bioc:relates_to ?idY ; bioc:relates_to ?prs ; bioc:value ?val2 .         BIND (?valX+?valY+?val2 AS ?val)   }   FILTER (?id != ?prs)   OPTIONAL { ?prs skosxl:prefLabel/schema:familyName ?fname . }   OPTIONAL { ?prs skosxl:prefLabel/schema:givenName ?gname . }   BIND (CONCAT(COALESCE(?gname, "")," ",COALESCE(?fname, "")) AS ?label)} ORDER by ?val LIMIT 16 ',f={endpointUrl:n,usePost:!0},u=new s(f,{mapper:r,queryTemplate:' SELECT DISTINCT * WHERE {  {     <RESULT_SET>   }  FILTER not exists { ?id owl:sameAs [] }  ?id skosxl:prefLabel ?plabel .   \t\tOPTIONAL { ?plabel schema:givenName ?givenName . }  \t\tOPTIONAL { ?plabel schema:familyName ?familyName . }  OPTIONAL { ?id nbf:viaf ?viaf . }  OPTIONAL { ?id nbf:ulan ?ulan . }  OPTIONAL { ?id nbf:wikidata ?wikidata . }  OPTIONAL { ?id nbf:wikipedia ?wikipedia . }  OPTIONAL { ?id nbf:fennica ?fennica . }  OPTIONAL { ?id nbf:warsampo ?warsampo . }  OPTIONAL { ?id nbf:norssi ?norssi . }  OPTIONAL { ?id nbf:blf ?blf . }  OPTIONAL { ?id nbf:website ?website . }  OPTIONAL { ?id nbf:genicom ?genicom . }  OPTIONAL { ?id nbf:genitree ?genitree . }  OPTIONAL { ?id nbf:eduskunta ?eduskunta . }  OPTIONAL { ?id nbf:kirjasampo ?kirjasampo . }  OPTIONAL { ?id schema:relatedLink ?kansallisbiografia . }  OPTIONAL { ?id foaf:focus ?prs .   \t\tOPTIONAL { ?prs ^crm:P98_brought_into_life/nbf:place ?birthPlace . filter (isliteral(?birthPlace)) }   \t\tOPTIONAL { ?prs ^crm:P98_brought_into_life/nbf:time/skos:prefLabel ?birthDate . }  \t\tOPTIONAL { ?prs ^crm:P100_was_death_of/nbf:time/skos:prefLabel ?deathDate . }  \t\tOPTIONAL { ?prs ^crm:P100_was_death_of/nbf:place ?deathPlace . filter (isliteral(?deathPlace)) }  \t\tOPTIONAL { ?prs schema:gender ?gender . }  \t\tOPTIONAL { ?prs schema:image ?images . }  \t\tOPTIONAL { ?prs ^bioc:inheres_in ?occupation_id .   \t\t\t?occupation_id a nbf:Occupation ; skos:prefLabel ?occupation   \t\t\tOPTIONAL { ?occupation_id nbf:related_company ?company . }\t\t}  \t\tOPTIONAL { ?prs nbf:has_category ?category . }  \t\tOPTIONAL { ?prs nbf:has_biography ?bio .   \t\t\tOPTIONAL { ?bio nbf:has_paragraph [ nbf:content ?lead_paragraph ; nbf:id "0"^^xsd:integer  ] }  \t\t} } }',prefixes:l,paging:!0,pagesPerQuery:2}),m=new o(f,r)}angular.module("facetApp").service("nbfService",e),e.$inject=["$q","$location","_","facetService","FacetResultHandler","SPARQL_ENDPOINT_URL","AdvancedSparqlService","personMapperService"]}(),function(){"use strict";function e(e,t,a,i,s,n,o){this.getResults=function(a){var i=this,s=l.replace(/<RESULT_SET>/g,a.constraint.join(" "));return m.getObjectsNoGrouping(s).then(function(a){if(a.length>1e4)return e.reject({statusText:"Tulosjoukko on liian suuri. Ole hyv√§ ja rajaa tuloksia suodittimien avulla"});var s={},n=c.replace(/<DOC>/g,"<"+t.map(a,"id").join("> <")+">");return i.upos.forEach(function(e){s[e.key]=u.getObjectsNoGrouping(n.replace(/<UPOS>/g,e.key))}),e.all(s)})},this.getStatistics=function(e){var t=p.replace(/<RESULT_SET>/g,e.constraint.join(" "));return m.getObjectsNoGrouping(t)},this.getFacets=n.getFacets,this.getFacetOptions=function(){return angular.copy(f)},this.upos=[{key:"VERB",label:"Verbi"},{key:"NOUN",label:"Substantiivi"},{key:"ADJ",label:"Adjektiivi"},{key:"PROPN",label:"Erisnimi"}];var r=" PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX bioc: <http://ldf.fi/schema/bioc/>  PREFIX gvp: <http://vocab.getty.edu/ontology#>  PREFIX nbf: <http://ldf.fi/nbf/>  PREFIX categories: <http://ldf.fi/nbf/categories/>  PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX conll: <http://ufal.mff.cuni.cz/conll2009-st/task-description.html#>  PREFIX nif: <http://persistence.uni-leipzig.org/nlp2rdf/ontologies/nif-core#>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> ",l=" SELECT DISTINCT ?id WHERE {  {     <RESULT_SET>   }  }",c=r+' SELECT DISTINCT ?lemma (COUNT(?lemma) AS ?count) {   VALUES ?doc { <DOC> }   ?s nif:structure/<http://ldf.fi/nbf/biography/data#bioId> ?doc .   ?s a nif:Sentence .   ?word nif:sentence ?s .   ?word conll:UPOS "<UPOS>" .   ?word conll:LEMMA ?lemma .   FILTER(STRLEN(STR(?lemma))>1)  } GROUP BY ?lemma ORDER BY DESC(?count) LIMIT 50',p=r+" SELECT DISTINCT ?year (COUNT(distinct ?id) AS ?count) {   {     <RESULT_SET>   }   ?id foaf:focus/^crm:P98_brought_into_life/nbf:time/gvp:estStart ?birth .   BIND (FLOOR(YEAR(?birth)/10)*10 AS ?year)  } GROUP BY ?year ORDER BY ?year ",d={endpointUrl:s,usePost:!0},f={endpointUrl:d.endpointUrl,rdfClass:"<http://ldf.fi/nbf/PersonConcept>",constraint:"?id <http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_biography> [] .",preferredLang:"fi",noSelectionString:"-- Ei valintaa --"},u=new a({endpointUrl:"https://ldf.fi/nbf-nlp/sparql",usePost:!0},o),m=new a(d,o)}angular.module("facetApp").service("nlpService",e),e.$inject=["$q","_","AdvancedSparqlService","FacetResultHandler","SPARQL_ENDPOINT_URL","facetService","objectMapperService"]}(),function(){"use strict";function e(e,t,a,i,s,n,o){this.getFacets=function(){var t=angular.copy(facets);return e.when(t)},this.getFacetOptions=function(){return facetOptions},this.updateSortBy=function(e){(t.search().sortBy||"?ordinal")===e&&t.search("desc",!t.search().desc||null);t.search("sortBy",e)},this.getSortClass=function(e,a){var i=t.search().sortBy||"?ordinal",s=a?"glyphicon-sort-by-order":"glyphicon-sort-by-alphabet";if(i===e)return t.search().desc?s+"-alt":s},this.getEvents=function(t){var a=r+l,i="VALUES ?idorg { <"+t+"> } . ?idorg owl:sameAs* ?pc . ";return p.getObjects(a.replace("<RESULT_SET>",i)).then(function(t){return t.length?t:e.reject("No events found")})};var r=" PREFIX owl: <http://www.w3.org/2002/07/owl#>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX bioc: <http://ldf.fi/schema/bioc/>  PREFIX nbf: <http://ldf.fi/nbf/>  PREFIX categories: <http://ldf.fi/nbf/categories/>  PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>  PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>  PREFIX gvp: <http://vocab.getty.edu/ontology#> ",l=' SELECT DISTINCT * WHERE {  {     <RESULT_SET>   }   ?pc a nbf:PersonConcept ;       foaf:focus ?prs ;   \t\tskosxl:prefLabel ?ilabel .   OPTIONAL { ?ilabel schema:givenName ?givenName }   OPTIONAL { ?ilabel schema:familyName ?familyName }   { ?pc bioc:has_family_relation ?id . \t\t?id bioc:inheres_in ?relative }   UNION   { ?id crm:P100_was_death_of ?prs . }   UNION   { ?id crm:P98_brought_into_life ?prs . }   UNION   { ?id bioc:inheres_in ?prs . }    ?id a/skos:prefLabel ?class . FILTER (lang(?class)="en")   ?id nbf:time ?time . \t\tOPTIONAL { ?time gvp:estStart ?time__start. }   \t\tOPTIONAL { ?time gvp:estEnd ?time__end. }   \t\tOPTIONAL { ?time skos:prefLabel ?time__label. }   \t    BIND ( CONCAT(\t        IF(bound(?time__start),str(year(?time__start)),"")\t        ,"-", \t        IF(bound(?time__end),str(year(?time__end)),"")\t      ) AS ?time__span)   OPTIONAL { ?id skos:prefLabel ?label }   OPTIONAL { ?id nbf:place ?place__uri .     \t?place__uri geo:lat ?place__latitude ;            geo:long ?place__longitude  ;    \t\tskos:prefLabel ?place__name .  }  } ORDER BY ?time__start DESC(?time__end)',c={endpointUrl:s,usePost:!0},p=(new i(c,{mapper:o,queryTemplate:l,prefixes:r,paging:!0,pagesPerQuery:2}),new n(c,o))}angular.module("facetApp").service("mapService",e),e.$inject=["$q","$location","_","FacetResultHandler","SPARQL_ENDPOINT_URL","AdvancedSparqlService","personMapperService"]}(),function(){"use strict";function e(e,t,a,i,s,n){var o=this;o.changed=c,o.clear=function(){o.facet.clear(),l()},o.enableFacet=function(){o.facet.enable()},o.disableFacet=function(){o.facet.disable(),l()},o.isFacetEnabled=function(){if(!o.facet)return!1;return o.facet.isEnabled()};var r=e.$watch("options",function(a){var l;a&&(l=e.$on(s,function(a,i){var s=t.cloneDeep(e.options);s.initial=i.facets,s.update=c,o.facet=new n(s),l()}),e.$emit(i),r())});function l(){var t={id:o.facet.facetId,constraint:o.facet.getConstraint(),value:o.facet.getSelectedValue(),priority:o.facet.getPriority()};e.$emit(a,t)}function c(){l()}}function t(e){return t.prototype.getConstraint=function(){var e=this.slider.minValue,t=this.slider.maxValue,a="?slider_"+this.internalId;return"?id <PREDICATE> <OBJ> . FILTER (<STARTYEAR><=year(<OBJ>) && year(<OBJ>)<=<ENDYEAR>) ".replace(/<OBJ>/g,a).replace(/<PREDICATE>/g,this.predicate).replace("<STARTYEAR>",e).replace("<ENDYEAR>",t)},t.prototype.getPriority=function(){return this.config.priority},t.prototype.getPreferredLang=function(){return this.config.preferredLang},t.prototype.disable=function(){this.selectedValue=void 0,this._isEnabled=!1},t.prototype.enable=function(){this._isEnabled=!0},t.prototype.clear=function(){},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.getSelectedValue=function(){return{min:this.slider.minValue,max:this.slider.maxValue}},t;function t(t){this.config=angular.extend({},{preferredLang:"fi"},t),this.name=this.config.name,this.facetId=this.config.facetId,this.predicate=this.config.predicate,this.config.enabled?this.enable():this.disable(),this.internalId=e.uniqueId();var a=parseInt(this.config.min)||200,i=parseInt(this.config.max)||(new Date).getFullYear();this.slider={minValue:a,maxValue:i,options:{floor:a,ceil:i,step:10,draggableRange:!0,onEnd:this.config.update}};var s=e.get(t,"initial."+this.facetId+".value");s&&(this._isEnabled=!0,this.slider.minValue=s.min,this.slider.maxValue=s.max)}}angular.module("seco.facetedSearch").factory("SliderFacet",t).controller("SliderFacetController",e).directive("secoSliderFacet",function(){return{restrict:"E",scope:{options:"="},controller:"SliderFacetController",controllerAs:"vm",templateUrl:"views/sliderFacet.directive.html"}}),e.$inject=["$scope","_","EVENT_FACET_CHANGED","EVENT_REQUEST_CONSTRAINTS","EVENT_INITIAL_CONSTRAINTS","SliderFacet"],t.$inject=["_"]}(),function(){"use strict";function e(e,t,a,i,s,n,o){this.getResults=function(e){var t=l+c.replace("<RESULT_SET>",e.constraint.join(" "));return f.getObjectsNoGrouping(t)},this.getFacets=function(){var t=angular.copy(r);return e.when(t)},this.getFacetOptions=function(){return d},this.updateSortBy=function(e){(t.search().sortBy||"?ordinal")===e&&t.search("desc",!t.search().desc||null);t.search("sortBy",e)},this.getSortClass=function(e,a){var i=t.search().sortBy||"?ordinal",s=a?"glyphicon-sort-by-order":"glyphicon-sort-by-alphabet";if(i===e)return t.search().desc?s+"-alt":s};var r={entryText:{facetId:"entryText",graph:"<http://ldf.fi/nbf/people>",name:"Haku",enabled:!0},dataset:{facetId:"dataset",predicate:"<http://purl.org/dc/terms/source>",name:"Tietokanta"},slider:{facetId:"slider",name:"Rajaa henkil√∂iden syntym√§aika",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>/<http://ldf.fi/nbf/time>/<http://vocab.getty.edu/ontology#estStart>",enabled:!0},link:{facetId:"link",choices:[{id:"wikipedia",pattern:"?id <http://ldf.fi/nbf/wikipedia> [] .",label:"Wikipedia"},{id:"wikidata",pattern:"?id <http://ldf.fi/nbf/wikidata> [] .",label:"Wikidata"},{id:"sotasampo",pattern:"?id <http://ldf.fi/nbf/warsampo> [] .",label:"Sotasampo"},{id:"norssit",pattern:"?id <http://ldf.fi/nbf/norssi> [] .",label:"Norssit"},{id:"kirjasampo",pattern:"?id <http://ldf.fi/nbf/kirjasampo> [] . ",label:"Kirjasampo"},{id:"blf",pattern:"?id <http://ldf.fi/nbf/blf> [] .",label:"BLF"},{id:"ulan",pattern:"?id <http://ldf.fi/nbf/ulan> [] .",label:"ULAN"},{id:"viaf",pattern:"?id <http://ldf.fi/nbf/viaf> [] .",label:"VIAF"},{id:"genicom",pattern:"?id <http://ldf.fi/nbf/genicom> [] .",label:"Geni.com"},{id:"website",pattern:"?id <http://ldf.fi/nbf/website> [] .",label:"Kotisivu"},{id:"eduskunta",pattern:"?id <http://ldf.fi/nbf/eduskunta> [] .",label:"Eduskunta"}],enabled:!0,name:"Linkit"},period:{facetId:"period",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_period>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Ajanjakso",enabled:!0},author:{facetId:"author",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_biography>/<http://schema.org/author>",name:"Kirjoittaja"},birthYear:{facetId:"birthYear",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>/<http://ldf.fi/nbf/time>",name:"Synnyinaika",enabled:!0},place:{facetId:"place",predicate:"<http://xmlns.com/foaf/0.1/focus>/(^<http://www.cidoc-crm.org/cidoc-crm/P98_brought_into_life>|^<http://www.cidoc-crm.org/cidoc-crm/P100_was_death_of>)/<http://ldf.fi/nbf/place>/<http://www.w3.org/2004/02/skos/core#prefLabel>",name:"Paikkakunta",enabled:!0},deathYear:{facetId:"birthYear",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://www.cidoc-crm.org/cidoc-crm/P100_was_death_of>/<http://ldf.fi/nbf/time>",name:"Kuolinaika",enabled:!0},title:{facetId:"title",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://ldf.fi/schema/bioc/inheres_in>/<http://ldf.fi/nbf/has_title>",name:"Arvo, ammatti tai toiminta",hierarchy:"<http://www.w3.org/2004/02/skos/core#broader>",depth:3,enabled:!0},company:{facetId:"company",predicate:"<http://xmlns.com/foaf/0.1/focus>/^<http://ldf.fi/schema/bioc/inheres_in>/<http://ldf.fi/nbf/related_company>",name:"Yritys tai yhteis√∂",enabled:!0},category:{facetId:"category",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/has_category>",name:"Toimiala",enabled:!0},gender:{facetId:"gender",predicate:"<http://xmlns.com/foaf/0.1/focus>/<http://ldf.fi/nbf/sukupuoli>",name:"Sukupuoli",enabled:!0}},l=" PREFIX owl: <http://www.w3.org/2002/07/owl#>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX bioc: <http://ldf.fi/schema/bioc/>  PREFIX nbf: <http://ldf.fi/nbf/>  PREFIX categories:\t<http://ldf.fi/nbf/categories/>  PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>  PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>  PREFIX gvp: <http://vocab.getty.edu/ontology#> ",c='SELECT DISTINCT ?id ?evt ?person__name ?time__start ?time__end ?class ?place__uri ?place__label ?place__latitude ?place__longitude WHERE {   { SELECT DISTINCT ?id WHERE {    { <RESULT_SET> }   } LIMIT 2500 }   ?id foaf:focus ?prs .   ?id skosxl:prefLabel ?person__label .   OPTIONAL { ?person__label schema:familyName ?person__fname }   OPTIONAL { ?person__label schema:givenName ?person__gname }   BIND (CONCAT(COALESCE(?person__gname, "")," ",COALESCE(?person__fname, "")) AS ?person__name)   { ?evt crm:P100_was_death_of ?prs . }   UNION   { ?evt crm:P98_brought_into_life ?prs . }     ?evt nbf:time ?time .   OPTIONAL { ?time gvp:estStart ?time__start. }   OPTIONAL { ?time gvp:estEnd ?time__end. }   FILTER (BOUND(?time__start) || BOUND(?time__end))      ?evt a/skos:prefLabel ?class .   FILTER (lang(?class)="en")     ?evt nbf:place ?place__uri .      ?place__uri geo:lat ?place__latitude ;           geo:long ?place__longitude ;          skos:prefLabel ?place__label . \tFILTER (lang(?place__label)="fi") } ORDER BY ?person__fname',p={endpointUrl:s,usePost:!0},d={endpointUrl:p.endpointUrl,rdfClass:"<http://ldf.fi/nbf/PersonConcept>",constraint:"?id <http://ldf.fi/nbf/ordinal> ?ordinal . ",preferredLang:"fi",noSelectionString:"-- Ei valintaa --"},f=(new i(p,{mapper:o,queryTemplate:c,prefixes:l,paging:!1,pagesPerQuery:1}),new n(p,o))}angular.module("facetApp").service("groupmapService",e),e.$inject=["$q","$location","_","FacetResultHandler","SPARQL_ENDPOINT_URL","AdvancedSparqlService","personMapperService"]}(),function(){"use strict";function e(e,t,a,i){return{link:function(e,i){return t("navbar-fi.html").then(function(e){return i.html(e),t("views/subnavbar.html")}).then(function(t){return angular.element("#subnav").html(t),a(i.contents())(e)})},controller:function(){this.showHelp=function(){i.open({templateUrl:"views/help.html",size:"lg"})}},controllerAs:"vm"}}angular.module("facetApp").directive("wsNavbar",e),e.$inject=["$location","$templateRequest","$compile","$uibModal"]}(),function(){"use strict";function e(e,t,a){var i=this;i.login=function(){return a.login(i.un,i.pw).then(function(a){if(a)return e.transitionTo("cards",t,{reload:!0,inherit:!1,notify:!0});i.error="Kirjautuminen ep√§onnistui"})}}angular.module("facetApp").controller("LoginController",e),e.$inject=["$state","$stateParams","loginService"]}(),function(){"use strict";function e(e,t,a,i,s){var n=this;function o(e){n.isLoadingResults=!1,n.error=e}n.openPage=function(){t.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return n.person}}})},i.getPerson(e.personId).then(function(e){return n.person=e,i.getBios(n.person.id).then(function(e){e.length&&(e.forEach(function(e){e.description&&(e.description=s.trustAsHtml(e.description)),e.source_paragraph&&(e.source_paragraph=s.trustAsHtml(e.source_paragraph)),e.lead_paragraph&&(e.lead_paragraph=s.trustAsHtml(e.lead_paragraph))}),n.person.bios=e)}),i.getSimilar(n.person.id).then(function(e){e.length&&(n.person.similar=e)}),e}).catch(o)}angular.module("facetApp").controller("DetailController",e),e.$inject=["$stateParams","$uibModal","_","nbfService","$sce"]}(),function(){"use strict";function e(e,t,a,i,s,n,o,r,l){var c=this;c.openPage=function(e){a.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return e}}})},c.removeFacetSelections=function(){t.reload()},c.sortBy=function(e){return n.updateSortBy(e),u({constraint:c.previousSelections})},c.getSortClass=n.getSortClass;var p=e.$on("sf-initial-constraints",function(e,t){f(e,t),p()});function d(e){return c.isLoadingResults=!0,c.pager.getPage(e.page()-1,e.count()).then(function(e){return c.pager.getTotalCount().then(function(t){return c.tableParams.total(t),e}).then(function(e){return c.isLoadingResults=!1,e})})}function f(e,t){return l.updateUrlParams(t),c.previousSelections=i.clone(t.constraint),u(t)}function u(e){c.isLoadingResults=!0,n.getResults(e).then(function(e){c.pager=e,c.tableParams?(c.tableParams.page(1),c.tableParams.reload()):c.tableParams=new o({count:s},{getData:d})})}e.$on("sf-facet-constraints",f),n.getFacets().then(function(t){var a;c.facets=t,c.facetOptions=((a=n.getFacetOptions()).initialState=l.getFacetValuesFromUrlParams(),a),c.facetOptions.scope=e,c.handler=new r(c.facetOptions)})}angular.module("facetApp").controller("TableController",e),e.$inject=["$scope","$state","$uibModal","_","RESULTS_PER_PAGE","nbfService","NgTableParams","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function e(e,t,a,i){var s=this;s.openPage=function(){t.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return s.person}}})},s.map={center:{latitude:62,longitude:24},zoom:6},s.markers=[],s.focusEvent=function(e){s.currentEvent=e.id+": "+e.label,e.markers.forEach(function(e){e.options.icon.strokeWeight=4,e.options.zIndex+=100,setTimeout(function(){e.options.animation=null},1200)})},s.unfocusEvent=function(e){s.currentEvent=".",e.markers.forEach(function(e){e.options.icon.strokeWeight=1,e.options.zIndex-=100})},i.getEvents(e.personId).then(function(e){return s.currentEvent=".",s.events=e,e.length&&(s.person=e[0]),s.events=function(e,t){var a=(new Date).getFullYear(),i=!1,s=0;t.min_time=a,t.max_time=0;var n={};e.forEach(function(e){e.place&&e.place.uri&&(["uri","latitude","longitude"].forEach(function(t){e.place[t]&&e.place[t].constructor!==Array&&(e.place[t]=[e.place[t]])}),e.place.uri.forEach(function(t){n.hasOwnProperty(t)||(n[t]={count:0,latitude:e.place.latitude,longitude:e.place.longitude,type:e.class}),n[t].count+=1}))});var l=[[],[],[],[]];return e.forEach(function(e){e.y=0,e.r=1,e.markers=[],e.blobs=[],e.time.span.constructor!==Array&&(e.time.span=[e.time.span]),e.time.span.forEach(function(a){var i=a.split("-"),s={};""!=i[0]&&(i[0]=parseInt(i[0]),i[0]<t.min_time&&(t.min_time=i[0]),t.max_time<i[0]&&(t.max_time=i[0]),s.estStart=i[0]),""!=i[1]&&(i[1]=parseInt(i[1]),i[1]<t.min_time&&(t.min_time=i[1]),t.max_time<i[1]&&(t.max_time=i[1]),s.estEnd=i[1]),e.blobs.push(s)}),e.label||(e.label=""),e.class||(e.class="event"),e.class=e.class.toLowerCase();var a=0;switch(e.class){case"death":i=!0,e.label="Kuollut "+e.label,e.r=1.5;break;case"birth":e.label="Syntynyt "+e.label,e.place&&e.place.latitude&&(t.map.center={latitude:e.place.latitude[0],longitude:e.place.longitude[0]}),e.r=1.5,t.min_time<e.blobs[0].estStart&&(t.min_time=e.blobs[0].estStart);break;case"spouse":case"child":e.relative&&(e.relativelink=e.relative),e.label=e.label+", "+e.time.label;break;case"career":e.y=5,a=1;break;case"product":e.y=10,a=2;break;case"honour":e.y=15,a=3;break;default:e.y=5,e.class="event",a=1}if(l[a].push(e),e.id=++s,e.place&&e.place.latitude)for(var r=0;r<e.place.latitude.length;r++){var c=e.place.uri[r]&&n[e.place.uri[r]]&&n[e.place.uri[r]].count?15*Math.sqrt(n[e.place.uri[r]].count):15,p=o(e.place.latitude[r],e.place.longitude[r],e.id,e.class,c);e.markers.push(p),t.markers.push(p)}}),l.forEach(function(e){(function(e){for(var t={},a=e.length,i=0;i<a;i++)e[i].blobs.forEach(function(e){for(var a=e.estStart?e.estStart:e.estEnd-3,s=e.estEnd?e.estEnd:a+3,n=a;n<=s;n++)t[n]=i});var s=Array(a).fill(!1);for(var n in t)s[t[n]]=!0;for(var o=[],i=0;i<a;i++)s[i]||o.push(i);return o})(e).forEach(function(t){e[t].y+=2.5})}),i||(t.max_time+=15),t.max_time<=t.min_time&&(t.max_time=t.min_time+75),t.max_time>t.min_time+150&&(t.max_time=t.min_time+150),t.max_time>a&&(t.max_time=a),e.forEach(function(e){e.path="";var a=.1*Math.random();e.blobs.forEach(function(i){var s=i.estStart?r(i.estStart,t.min_time,t.max_time)+a:void 0,n=i.estEnd?r(i.estEnd,t.min_time,t.max_time)+a:void 0;s?n?e.path+="M"+s+","+(e.y-e.r)+" a"+e.r+","+e.r+",0,0,0,0,"+2*e.r+" H"+n+" a"+e.r+","+e.r+",0,0,0,0,-"+2*e.r+" Z":(n=s+3,e.path+="M"+n+","+(e.y-e.r)+" H"+s+" a"+e.r+","+e.r+",0,0,0,0,"+2*e.r+" H"+n):(s=n-3,e.path+="M"+s+","+(e.y+e.r)+" H"+n+" a"+e.r+","+e.r+",0,0,0,0,-"+2*e.r+" H"+s)}),e.blobs=[]}),e}(e,s),s.viewBox="1930,-10,120,27",function(e){for(var t=e.min_time,a=e.max_time,i=[],s=[{x:-2.5,y:0,content:"Elinkaari"},{x:-2.5,y:5,content:"Ura"},{x:-2.5,y:10,content:"Teokset"},{x:-2.5,y:15,content:"Kunniamaininnat"}],n=10*Math.ceil(t/10);n<a;n+=10){var o=r(n,t,a);i.push({x1:o,x2:o,y1:0,y2:15}),s.push({x:o+1,y:-2,content:""+n})}for(var l=0;l<20;l+=5)i.push({x1:r(t,t,a),x2:r(a,t,a),y1:l,y2:l});e.mainline={lines:i,texts:s}}(s),e}).catch(l);var n=1;function o(e,t,a,i,s){s||(s=15);return{latitude:e,longitude:t,id:n++,options:{icon:{path:"M-"+s+" 0 A "+s+","+s+", 0 ,1, 1,"+s+",0 A"+s+","+s+",0,1,1,-"+s+",0 Z",scale:1,anchor:new google.maps.Point(0,0),fillColor:{death:"#ff4141",birth:"#777fff",spouse:"#c3b981",child:"#7f6780",career:"#999999",product:"#83d236",honour:"#ce5c00",event:"#999999"}[i],fillOpacity:.6,strokeOpacity:.5,strokeWeight:1,labelOrigin:new google.maps.Point(0,0)},zIndex:a,optimized:!1,label:{text:""+a,fontSize:"14px",fontFamily:'"Courier New", Courier,Monospace',color:"black"}}}}function r(e,t,a){return e-t}function l(e){s.isLoadingResults=!1,s.error=e}}angular.module("facetApp").controller("MapController",e),e.$inject=["$stateParams","$uibModal","_","mapService"]}(),function(){"use strict";function e(e,t,a,i,s,n,o,r,l){var c=this;c.map={center:{latitude:62,longitude:24},zoom:6},c.markers=[],c.window={show:!1,position:{lat:60.192059,lng:24.945831}},c.showWindow=function(){c.window.show=!0},c.closeWindow=function(){c.window.show=!1},c.isScrollDisabled=function(){return c.isLoadingResults||nextPageNo>maxPage},c.removeFacetSelections=function(){a.reload()},c.getSortClass=n.getSortClass;var p=e.$on("sf-initial-constraints",function(e,t){d(e,t),p()});function d(e,t){if(!c.previousSelections||!s.isEqual(t.constraint,c.previousSelections))return c.previousSelections=s.clone(t.constraint),r.updateUrlParams(t),f(t)}function f(e){c.isLoadingResults=!0,c.error=void 0;var t=s.uniqueId();return t,n.getResults(e).then(function(e){c.events=function(e,t){var a={};e.forEach(function(e){e.class||(e.class="event"),e.class=e.class.toLowerCase();var t=e.class+e.place.uri;a.hasOwnProperty(t)||(a[t]={count:0,latitude:e.place.latitude,longitude:e.place.longitude,label:e.place.label,type:e.class,people:{}}),a[t].count+=1,a[t].people[e.id]=e.person.name}),t.markers=[];var i=0;for(var s in a){var n=a[s],o=m(t,n.latitude,n.longitude,++i,n.type,n.count,n.label,n.people);t.markers.push(o)}t.markers.sort(function(e,t){return t.count-e.count});var r=new google.maps.LatLngBounds,l=document.getElementById("ui-gmap-google-map");l&&l.fitBounds&&l.fitBounds(r);return e}(e,c)}).catch(u)}function u(e){c.isLoadingResults=!1,c.error=e}function m(t,a,i,s,n,o,r,l){var c=5*Math.sqrt(o);return{count:o,latitude:a,longitude:i,id:s,options:{icon:{path:"M-"+c+" 0 A "+c+","+c+", 0 ,1, 1,"+c+",0 A"+c+","+c+",0,1,1,-"+c+",0 Z",scale:1,anchor:new google.maps.Point(0,0),fillColor:{death:"#ff4141",birth:"#777fff",spouse:"#c3b981",child:"#7f6780",career:"#999999",product:"#83d236",honour:"#ce5c00",event:"#ABCDEF"}[n],fillOpacity:.6,strokeOpacity:.2,strokeWeight:1,labelOrigin:new google.maps.Point(0,0)},optimized:!0},onClick:function(){t.place_label=r,"death"==n?t.place_label+=", kuolleet":"birth"==n&&(t.place_label+=", syntyneet");var s=[];for(var o in l)s.push({uri:o,label:l[o]});t.people=s,t.window.position.lat=parseInt(a),t.window.position.lng=parseInt(i),t.showWindow(),e.$apply()}}}e.$on("sf-facet-constraints",d),n.getFacets().then(function(t){var a;c.facets=t,c.facetOptions=((a=n.getFacetOptions()).initialState=r.getFacetValuesFromUrlParams(),a),c.facetOptions.scope=e,c.handler=new o(c.facetOptions)})}angular.module("facetApp").controller("GroupmapController",e),e.$inject=["$scope","$location","$state","$uibModal","_","groupmapService","FacetHandler","facetUrlStateHandlerService","EVENT_FACET_CHANGED"]}(),function(){"use strict";function e(e,t,a,i,s,n,o,r){var l,c,p=this;p.openPage=function(e){i.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return e}}})},p.nextPage=m,p.isScrollDisabled=function(){return p.isLoadingResults||l>c},p.removeFacetSelections=function(){a.reload()},p.sortBy=function(e){return n.updateSortBy(e),h({constraint:p.previousSelections})},p.getSortClass=n.getSortClass,p.people=[];var d,f,u=e.$on("sf-initial-constraints",function(e,t){g(e,t),u()});function m(){var e=s.uniqueId();d=e,p.isLoadingResults=!0,l++<=c?p.pager.getPage(l-1,24).then(function(t){e===d&&(p.people=p.people.concat(t),p.isLoadingResults=!1)}).catch(v):p.isLoadingResults=!1}function g(e,t){if(!p.previousSelections||!s.isEqual(t.constraint,p.previousSelections))return p.previousSelections=s.clone(t.constraint),r.updateUrlParams(t),h(t)}function h(e){p.isLoadingResults=!0,p.people=[],p.error=void 0;var t=s.uniqueId();f=t,l=0,n.getResults(e).then(function(e){return e.getMaxPageNo().then(function(t){return[e,t]})}).then(function(e){if(f===t)return p.pager=e[0],c=e[1],p.isLoadingResults=!1,m()}).catch(v)}function v(e){p.isLoadingResults=!1,p.error=e}e.$on("sf-facet-constraints",g),n.getFacets().then(function(t){var a;p.facets=t,p.facetOptions=((a=n.getFacetOptions()).initialState=r.getFacetValuesFromUrlParams(),a),p.facetOptions.scope=e,p.handler=new o(p.facetOptions)})}angular.module("facetApp").controller("CardsController",e),e.$inject=["$scope","$location","$state","$uibModal","_","nbfService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function e(e,t,a,i,s,n,o,r){var l=this;l.hasResults=function(){return i.keys(l.results).length>0},l.upos=n.upos,l.removeFacetSelections=function(){a.reload()},n.getFacets().then(function(e){var a;l.facets=e,l.facetOptions=((a=n.getFacetOptions()).initialState=r.getFacetValuesFromUrlParams(),a),l.facetOptions.scope=t,l.handler=new o(l.facetOptions)});var c,p=t.$on("sf-initial-constraints",function(e,t){d(e,t),p()});function d(t,a){if(!l.previousSelections||!i.isEqual(a.constraint,l.previousSelections))return l.previousSelections=i.clone(a.constraint),r.updateUrlParams(a),function(t){l.isLoadingResults=!0,l.results=[],l.error=void 0;var a=i.uniqueId();return c=a,n.getStatistics(t).then(function(e){c===a&&function(e){s.charts.setOnLoadCallback(function(){var t=new s.visualization.DataTable,a=i.map(e,function(e){return parseInt(e.year)}),n=i.map(e,function(e){return[e.year,parseInt(e.count)]}),o={title:"Biografiajakauma vuosikymmenitt√§in",legend:{position:"none"},tooltip:{format:"none"},colors:["blue"],hAxis:{slantedText:!1,maxAlternation:1,format:"",ticks:a},vAxis:{maxValue:4},width:"95%",bar:{groupWidth:"88%"},height:500},r=new s.visualization.ColumnChart(document.getElementById("biography-chart"));t.addColumn("string","Vuosikymmen"),t.addColumn("number","Biografioita"),t.addRows(n),r.draw(t,o)})}(e)}).then(function(){return n.getResults(t).then(function(e){c===a&&(l.results=e,l.isLoadingResults=!1)})}).catch(function(t){return function(t,a){a===c&&(l.isLoadingResults=!1,l.error=t,e.error(t))}(t,a)})}(a)}t.$on("sf-facet-constraints",d)}angular.module("facetApp").controller("NlpStatisticsController",e),e.$inject=["$log","$scope","$state","_","google","nlpService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function e(e,t,a,i,s,n){var o=this;o.hasResults=function(){return i.keys(o.results).length>0},o.removeFacetSelections=function(){a.reload()},o.upos=s.upos,s.getFacets().then(function(e){o.facets=e,o.facetOptions=s.getFacetOptions(),o.facetOptions.scope=t,o.handler=new n(o.facetOptions)});var r,l=t.$on("sf-initial-constraints",function(e,t){c(e,t),l()});function c(t,a){if(!o.previousSelections||!i.isEqual(a.constraint,o.previousSelections))return o.previousSelections=i.clone(a.constraint),function(t){o.isLoadingResults=!0,o.results=[],o.error=void 0;var a=i.uniqueId();return r=a,s.getResults(t).then(function(e){r===a&&(o.results=e,o.isLoadingResults=!1)}).catch(function(t){return function(t,a){a===r&&(o.isLoadingResults=!1,o.error=t,e.error(t))}(t,a)})}(a)}t.$on("sf-facet-constraints",c)}angular.module("facetApp").controller("NlpComparisonController",e),e.$inject=["$log","$scope","$state","_","nlpService","FacetHandler"]}(),function(){"use strict";function e(e,t,a,i,s,n,o,r){var l=this;l.people=[],l.startYear=[],l.topTitles=[],l.topOrgs=[],l.removeFacetSelections=function(){i.reload()},google.charts.load("current",{packages:["corechart","line","sankey"]});var c,p=e.$on("sf-initial-constraints",function(e,t){d(e,t),p()});function d(e,t){if(!l.previousSelections||!s.isEqual(t.constraint,l.previousSelections))return l.previousSelections=s.clone(t.constraint),r.updateUrlParams(t),function(e){l.isLoadingResults=!0,l.people=[],l.years=[],l.topTitles=[],l.topOrgs=[],l.error=void 0;var t=s.uniqueId();return c=t,n.getResults2(e).then(function(e){if(c===t)return l.isLoadingResults=!1,l.people=e[0],e}).catch(m)}(t).then(function(e){google.charts.setOnLoadCallback(function(){f("occupation","My√∂hempi arvo tai ammatti","chart_occupation")}),google.charts.setOnLoadCallback(function(){f("organization","Ty√∂nantajat tai j√§senyydet j√§rjest√∂iss√§","chart_organization")}),google.charts.setOnLoadCallback(function(){f("eduorganization","Opiskelupaikkoja Norssin j√§lkeen","chart_eduorganization")}),google.charts.setOnLoadCallback(function(){f("education","Koulutus Norssin j√§lkeen","chart_education")}),google.charts.setOnLoadCallback(u)})}function f(e,t,a){var i=function(e,t){return function(e,t){var a={};return $.each(e,function(e,i){if(i.hasOwnProperty(t)){var s=i[t];a.hasOwnProperty(s)?a[s]+=1:a[s]=1}}),$.map(a,function(e,t){return[[t,e]]})}(e,t).sort(function(e,t){return t[1]-e[1]})}(l.people,e),s=google.visualization.arrayToDataTable([[t,"Lukum√§√§r√§"]].concat(i)),n={title:t};new google.visualization.PieChart(document.getElementById(a)).draw(s,n)}function u(){var e="education",t="eduorganization",a={},i={},s=10;$.each(l.people,function(s,n){if(n.hasOwnProperty(e)&&n.hasOwnProperty(t)){var o=n[e],r=n[t];a.hasOwnProperty(o)?a[o]+=1:a[o]=1,i.hasOwnProperty(r)?i[r]+=1:i[r]=1}}),a=$.map(a,function(e,t){return[[t,e]]}).sort(function(e,t){return t[1]-e[1]}),i=$.map(i,function(e,t){return[[t,e]]}).sort(function(e,t){return t[1]-e[1]});var n={},o={};$.each(a,function(e,t){n[t[0]]={index:e<9?e:9}}),$.each(i,function(e,t){o[t[0]]={index:e<9?e:9}});var r=$.map(new Array(Math.min(s,a.length)),function(e,t){return[$.map(new Array(Math.min(s,i.length)),function(e,t){return 0})]});$.each(l.people,function(a,i){if(i.hasOwnProperty(e)&&i.hasOwnProperty(t)){var s=i[e],l=i[t];r[n[s].index][o[l].index]+=1}});for(var c=[],p=0;p<r.length;p++)for(var d=0;d<r[p].length;d++)c.push([d<9?i[d][0]:"muu laitos",p<9?a[p][0]:"muu arvo",r[p][d]]);var f=new google.visualization.DataTable;f.addColumn("string",t),f.addColumn("string",e),f.addColumn("number","Weight"),f.addRows(c);new google.visualization.Sankey(document.getElementById("chart_sankey")).draw(f,{title:"Otsikko",sankey:{node:{label:{fontSize:14,color:"#000",bold:!0},labelPadding:12}}})}function m(e){console.log(e),l.isLoadingResults=!1,l.error=e}e.$on("sf-facet-constraints",d),n.getFacets().then(function(t){var a;l.facets=t,l.facetOptions=((a=n.getFacetOptions()).initialState=r.getFacetValuesFromUrlParams(),a),l.facetOptions.scope=e,l.handler=new o(l.facetOptions)})}angular.module("facetApp").controller("VisuController",e),e.$inject=["$scope","$location","$q","$state","_","visuService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function e(e,t,a,i,s,n,o,r,l,c){var p=this;p.people=[],p.startYear=[],p.showForm=function(){c.open({templateUrl:"views/visu.popup.html",scope:e})},p.removeFacetSelections=function(){i.reload()};var d,f=e.$on("sf-initial-constraints",function(e,t){u(e,t),f()});function u(e,t){if(!p.previousSelections||!s.isEqual(t.constraint,p.previousSelections))return p.previousSelections=s.clone(t.constraint),l.updateUrlParams(t),function(e){p.isLoadingResults=!0,p.ages=[],p.marriageAges=[],p.firstChildAges=[],p.numberOfChildren=[],p.numberOfSpouses=[],p.error=void 0;var t=s.uniqueId();return d=t,o.getResults(e).then(function(e){if(d===t)return p.isLoadingResults=!1,p.ages=e[0],p.marriageAges=e[1],p.firstChildAges=e[2],p.numberOfChildren=e[3],p.numberOfSpouses=e[4],e}).catch(g)}(t).then(function(e){n.charts.setOnLoadCallback(function(){m(p.ages,[1,120],"Elinik√§","chart_age")}),n.charts.setOnLoadCallback(function(){m(p.marriageAges,[1,120],"Naimisiinmenoik√§","chart_marriageAge")}),n.charts.setOnLoadCallback(function(){m(p.firstChildAges,[1,120],"Lapsensaanti-ik√§","chart_firstChildAge")}),n.charts.setOnLoadCallback(function(){m(p.numberOfChildren,[1,25],"Lasten lukum√§√§r√§","chart_numberOfChildren")}),n.charts.setOnLoadCallback(function(){m(p.numberOfSpouses,[1,7],"Puolisoiden lukum√§√§r√§","chart_numberOfSpouses")})})}function m(e,t,a,i){for(var s=new Array(t[1]-t[0]+1),o=0;o<s.length;o++)s[o]=[];for(o=0;o<e.length;o++){var r=e[o];s[parseInt(r.value)].push(r.id)}var l=[];for(o=0;o<s.length;o++)l[o]=[o,s[o].length];var c=function(e){var t=0,a=0,i=0;if($.each(e,function(e,s){var n=s[0]*s[1];t+=n,a+=s[0]*n,i+=s[1]}),i>0){var s=t/i;return[i,s,Math.sqrt(a/i-s*s)]}return[0,0,0]}(l),d=new n.visualization.DataTable,f={title:a+", otos: "+c[0]+", keskiarvo: "+c[1].toFixed(2)+", keskihajonta: "+c[2].toFixed(2),legend:{position:"none"},tooltip:{format:"none"},colors:["blue"],hAxis:{slantedText:!1,maxAlternation:1,format:"",ticks:function(e){var t=[],a=10*Math.floor(1+e[0]/10);for(;a<e[1];)t.push(a),a+=10;return t}(t)},vAxis:{maxValue:4},width:"95%",bar:{groupWidth:"88%"},height:500},u=new n.visualization.ColumnChart(document.getElementById(i));d.addColumn("number","Ik√§"),d.addColumn("number","Henkil√∂√§"),d.addRows(l),u.draw(d,f),n.visualization.events.addListener(u,"select",function(){var e=u.getSelection();p.people=s[e[0].row],p.showForm()})}function g(e){console.log(e),p.isLoadingResults=!1,p.error=e}e.$on("sf-facet-constraints",u),o.getFacets().then(function(t){var a;p.facets=t,p.facetOptions=((a=o.getFacetOptions()).initialState=l.getFacetValuesFromUrlParams(),a),p.facetOptions.scope=e,p.handler=new r(p.facetOptions)})}angular.module("facetApp").controller("VisuController2",e),e.$inject=["$scope","$location","$q","$state","_","google","visuService","FacetHandler","facetUrlStateHandlerService","$uibModal"]}(),function(){"use strict";function e(e,t,a,i,s){this.getAge=function(e){var t=e.constraint.join(" "),a=o.replace("<RESULT_SET>",t);return f.getObjectsNoGrouping(a)},this.getMarriageAge=function(e){var t=e.constraint.join(" "),a=r.replace("<RESULT_SET>",t);return f.getObjectsNoGrouping(a)},this.getFirstChildAge=function(e){var t=e.constraint.join(" "),a=l.replace("<RESULT_SET>",t);return f.getObjectsNoGrouping(a)},this.getNumberOfChildren=function(e){var t=e.constraint.join(" "),a=c.replace(/<RESULT_SET>/g,t);return f.getObjectsNoGrouping(a)},this.getNumberOfSpouses=function(e){var t=e.constraint.join(" "),a=p.replace(/<RESULT_SET>/g,t);return f.getObjectsNoGrouping(a)},this.getResults=function(t){var a=[this.getAge(t),this.getMarriageAge(t),this.getFirstChildAge(t),this.getNumberOfChildren(t),this.getNumberOfSpouses(t)];return e.all(a)},this.getFacets=i.getFacets,this.getFacetOptions=function(){return d};var n="PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> PREFIX bioc:  <http://ldf.fi/schema/bioc/>  PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX skos:  <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX\tnbf:\t<http://ldf.fi/nbf/>  PREFIX\tcategories:\t<http://ldf.fi/nbf/categories/>  PREFIX\tgvp:\t<http://vocab.getty.edu/ontology#>\t PREFIX crm:   <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX dcterms: <http://purl.org/dc/terms/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX gvp: <http://vocab.getty.edu/ontology#> PREFIX\trelations:\t<http://ldf.fi/nbf/relations/> PREFIX\tsources:\t<http://ldf.fi/nbf/sources/> ",o=n+'SELECT DISTINCT (?id AS ?id__uri) ?id__name ?value WHERE {  { <RESULT_SET> }   ?id foaf:focus/^crm:P100_was_death_of/nbf:time [ gvp:estStart ?time ; gvp:estEnd ?time2 ] ;       foaf:focus/^crm:P98_brought_into_life/nbf:time [ gvp:estStart ?birth ; gvp:estEnd ?birth2 ] .   BIND (xsd:integer(0.5*(year(?time)+year(?time2)-year(?birth)-year(?birth2))) AS ?value)   FILTER (-1<?value && ?value<120)      ?id skosxl:prefLabel ?id__label .     OPTIONAL { ?id__label schema:familyName ?id__fname }     OPTIONAL { ?id__label schema:givenName ?id__gname }     BIND (CONCAT(COALESCE(?id__gname, "")," ",COALESCE(?id__fname, "")) AS ?id__name)  } ORDER BY ?value ?id__fname ?id__gname ',r=n+'SELECT DISTINCT (?id AS ?id__uri) ?id__name ?value  WHERE {      {     SELECT DISTINCT ?id (min(?age) AS ?value)     WHERE {       { <RESULT_SET> }       VALUES ?rel { relations:Spouse }       ?id bioc:has_family_relation [ a ?rel ;  nbf:time/gvp:estStart ?time ] ;                                      foaf:focus/^crm:P98_brought_into_life/nbf:time/gvp:estStart ?birth .       BIND (year(?time)-year(?birth) AS ?age)       FILTER (13<?age && ?age<120)}    GROUP BY ?id }    FILTER (BOUND(?id))  \t?id skosxl:prefLabel ?id__label .       OPTIONAL { ?id__label schema:familyName ?id__fname }       OPTIONAL { ?id__label schema:givenName ?id__gname }       BIND (CONCAT(COALESCE(?id__gname, "")," ",COALESCE(?id__fname, "")) AS ?id__name) } ORDER BY ?value ?id__fname ?id__gname ',l=n+'SELECT DISTINCT (?id AS ?id__uri) ?id__name ?value  WHERE {      {     SELECT DISTINCT ?id (min(?age) AS ?value)     WHERE {       { <RESULT_SET> }       VALUES ?rel { relations:Child relations:Son relations:Daughter }       ?id bioc:has_family_relation [ a ?rel ;  nbf:time/gvp:estStart ?time ] ;                                      foaf:focus/^crm:P98_brought_into_life/nbf:time/gvp:estStart ?birth .       BIND (year(?time)-year(?birth) AS ?age)       FILTER (13<?age && ?age<120)}     GROUP BY ?id }    FILTER (BOUND(?id))  \t?id skosxl:prefLabel ?id__label .       OPTIONAL { ?id__label schema:familyName ?id__fname }       OPTIONAL { ?id__label schema:givenName ?id__gname }       BIND (CONCAT(COALESCE(?id__gname, "")," ",COALESCE(?id__fname, "")) AS ?id__name) } ORDER BY ?value ?id__fname ?id__gname ',c=n+'SELECT DISTINCT (?id as ?id__uri) ?id__name ?value WHERE {   {       SELECT DISTINCT ?id (count(?rel) AS ?value)       WHERE { { <RESULT_SET> }         VALUES ?rel { relations:Child relations:Son relations:Daughter }         ?id bioc:has_family_relation/a ?rel . }        GROUP BY ?id }   UNION {     \t{ <RESULT_SET> }       ?id dcterms:source sources:source1 ;           foaf:focus/nbf:has_biography/nbf:has_paragraph/nbf:id "2"^^xsd:integer .       FILTER not exists { ?id bioc:has_family_relation/a relations:Child } \t   BIND (0 AS ?value) }   FILTER (BOUND(?id))   ?id skosxl:prefLabel ?id__label .       OPTIONAL { ?id__label schema:familyName ?id__fname }       OPTIONAL { ?id__label schema:givenName ?id__gname }       BIND (CONCAT(COALESCE(?id__gname, "")," ",COALESCE(?id__fname, "")) AS ?id__name) } ORDER BY ?value ?id__fname ?id__gname ',p=n+'SELECT DISTINCT (?id as ?id__uri) ?id__name ?value WHERE {   {       SELECT DISTINCT ?id (count(?rel) AS ?value)       WHERE { { <RESULT_SET> }         VALUES ?rel { relations:Spouse }         ?id bioc:has_family_relation/a ?rel . }        GROUP BY ?id }   UNION {     \t{ <RESULT_SET> }       ?id dcterms:source sources:source1 ;           foaf:focus/nbf:has_biography/nbf:has_paragraph/nbf:id "2"^^xsd:integer .       FILTER not exists { ?id bioc:has_family_relation/a relations:Spouse } \t   BIND (0 AS ?value) }   FILTER (BOUND(?id))   ?id skosxl:prefLabel ?id__label .       OPTIONAL { ?id__label schema:familyName ?id__fname }       OPTIONAL { ?id__label schema:givenName ?id__gname }       BIND (CONCAT(COALESCE(?id__gname, "")," ",COALESCE(?id__fname, "")) AS ?id__name) } ORDER BY ?value ?id__fname ?id__gname ',d={endpointUrl:s,rdfClass:"<http://ldf.fi/nbf/PersonConcept>",preferredLang:"fi",noSelectionString:"-- Ei valintaa --"},f=new t(s,a)}angular.module("facetApp").service("visuService",e),e.$inject=["$q","AdvancedSparqlService","objectMapperService","facetService","SPARQL_ENDPOINT_URL"]}(),function(){"use strict";function e(e,t,a,i){var s=this;function n(e){s.isLoadingResults=!1,s.error=e}s.openPage=function(){t.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return s.place}}})},i.getPlace(e.placeId).then(function(e){return console.log(e),function(e,t){var a=[],i=[],s=[];e.forEach(function(e){var t=e.prs;switch(t.event){case"http://ldf.fi/nbf/Birth":a.push(t);break;case"http://ldf.fi/nbf/Death":i.push(t);break;default:t.label=t.label+": "+t.eventLabel,s.push(t)}}),t.place={id:e[0].id,label:e[0].label},t.place.born=a,t.place.died=i,t.place.event=s}(e,s),console.log(s.place),s.place}).catch(n)}angular.module("facetApp").controller("PlaceController",e),e.$inject=["$stateParams","$uibModal","_","placeService"]}(),function(){"use strict";function e(e,t,a,i,s,n,o){this.getPlace=function(e){var t="VALUES ?id { <"+e+"> } . ",a=r.replace("<RESULT_SET>",t);return l.getObjectsNoGrouping(a)},this.getResults=function(t){var a=[this.getPlace(t)];return e.all(a)};var r='PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> PREFIX bioc:  <http://ldf.fi/schema/bioc/>  PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX skos:  <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX\tnbf:\t<http://ldf.fi/nbf/>  PREFIX\tcategories:\t<http://ldf.fi/nbf/categories/>  PREFIX\tgvp:\t<http://vocab.getty.edu/ontology#>\t PREFIX crm:   <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX dcterms: <http://purl.org/dc/terms/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX gvp: <http://vocab.getty.edu/ontology#> PREFIX\trelations:\t<http://ldf.fi/nbf/relations/> PREFIX\tsources:\t<http://ldf.fi/nbf/sources/>  SELECT distinct ?id ?label ?prs__event ?prs__eventLabel ?prs__id ?prs__label  WHERE {    { <RESULT_SET> }    ?id a nbf:Place ;        skos:prefLabel ?label . FILTER (lang(?label)="fi")    { OPTIONAL { ?prs__id foaf:focus/^crm:P98_brought_into_life [ nbf:place ?id ; a ?prs__event ] }    } UNION {    OPTIONAL { ?prs__id foaf:focus/^crm:P100_was_death_of [ nbf:place ?id ; a ?prs__event ] }    } UNION {     OPTIONAL { ?prs__id foaf:focus/^bioc:inheres_in  [ nbf:place ?id ; a ?prs__event ; skos:prefLabel ?prs__eventLabel ] }    }    ?prs__id skosxl:prefLabel ?prs__lab .      OPTIONAL { ?prs__lab schema:familyName ?prs__fname }      OPTIONAL { ?prs__lab schema:givenName ?prs__gname }      BIND (CONCAT(COALESCE(?prs__gname, "")," ",COALESCE(?prs__fname, "")) AS ?prs__label )  } ',l=new i(o,n)}angular.module("facetApp").service("placeService",e),e.$inject=["$q","$location","_","AdvancedSparqlService","FacetResultHandler","objectMapperService","SPARQL_ENDPOINT_URL"]}(),function(){"use strict";function e(e,t,a,i){var s=this;function n(e){s.isLoadingResults=!1,s.error=e}s.openPage=function(){t.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return s.title}}})},i.getTitle(e.titleId).then(function(e){return s.title=e[0],s.title}).catch(n)}angular.module("facetApp").controller("TitleController",e),e.$inject=["$stateParams","$uibModal","_","titleService"]}(),function(){"use strict";function e(e,t,a,i,s,n,o){this.getTitle=function(e){var t="VALUES ?id { <"+e+"> } . ",a=r.replace("<RESULT_SET>",t);return console.log(a),l.getObjectsNoGrouping(a)},this.getResults=function(t){var a=[this.getPlace(t)];return e.all(a)};var r="PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> PREFIX bioc:  <http://ldf.fi/schema/bioc/>  PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>  PREFIX schema: <http://schema.org/>  PREFIX skos:  <http://www.w3.org/2004/02/skos/core#>  PREFIX skosxl: <http://www.w3.org/2008/05/skos-xl#>  PREFIX\tnbf:\t<http://ldf.fi/nbf/>  PREFIX\tcategories:\t<http://ldf.fi/nbf/categories/>  PREFIX\tgvp:\t<http://vocab.getty.edu/ontology#>\t PREFIX crm:   <http://www.cidoc-crm.org/cidoc-crm/>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX dcterms: <http://purl.org/dc/terms/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX gvp: <http://vocab.getty.edu/ontology#> PREFIX\trelations:\t<http://ldf.fi/nbf/relations/> PREFIX\tsources:\t<http://ldf.fi/nbf/sources/>  SELECT distinct ?id ?label   WHERE {  \t { <RESULT_SET> }    ?id a nbf:Title ;    skos:prefLabel ?label .}",l=new i(o,n)}angular.module("facetApp").service("titleService",e),e.$inject=["$q","$location","_","AdvancedSparqlService","FacetResultHandler","objectMapperService","SPARQL_ENDPOINT_URL"]}(),angular.module("facetApp").run(["$templateCache",function(e){"use strict";e.put("views/cards.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive"> </div>\x3c!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --\x3e<div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/description.partial.html\'"></div> </div> <div class="col-md-4 pull-md-4 col-lg-3"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-8 col-lg-9"> <b>J√§rjest√§:</b> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?ordinal\')">Aikaj√§rjestys</a> <span ng-class="vm.getSortClass(\'?ordinal\', true)" class="glyphicon" aria-hidden="true"></span> </span> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?familyName\')">Sukunimi</a> <span ng-class="vm.getSortClass(\'?familyName\')" class="glyphicon" aria-hidden="true"></span> </span> <div ng-include="\'views/cards.partial.html\'"></div> </div> </div> </div>'),e.put("views/cards.partial.html",'<img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div infinite-scroll="vm.nextPage()" infinite-scroll-disabled="vm.isScrollDisabled()" infinite-scroll-distance="0"> <div class="row"> <div ng-repeat="person in vm.people" class="person-container"> <div class="col-xs-12 col-sm-12 person-panel col-md-4 col-lg-3"> <div class="thumbnail"> <a ui-sref="person.detail({ personId: person.id })"> <div class="person-profile-img vertical-center"> <img class="img img-responsive center-block media-middle" ng-src="{{ ::person.images | first }}"> </div> </a> <div class="caption"> <div class="visible-caption"> <div class="row"> <div class="col-xs-12 col-sm-3 col-md-12"> <b><a ui-sref="person.detail({ personId: person.id })">{{ ::person.givenName }} {{ ::person.familyName }}</a></b> </div> <div class="col-xs-12 col-sm-9 col-md-12"> <p ng-if="::(person.birthPlace || person.birthDate || person.deathDate)"> &#8727;&nbsp;<span ng-if="::person.birthPlace">{{ ::person.birthPlace }}</span> {{ ::person.birthDate }} <span ng-if="::person.deathDate">&dagger;&nbsp;{{ ::person.deathPlace }}&nbsp;{{ ::person.deathDate }}</span> </p> </div> <div ng-if="::person.occupation" class="col-xs-12"> <p>{{ ::person.occupation | castArray | join:\', \' }}</p> </div> <div class="col-xs-12 icon-menu"> <a title="N√§yt√§ matrikkeliteksti" ng-attr-title="{{ showText ? \'Piilota matrikkeliteksti\' : \'N√§yt√§ matrikkeliteksti\' }}" href="" ng-click="showText = !showText"><span class="glyphicon" ng-class="{ \'glyphicon-collapse-down\': !showText, \'glyphicon-collapse-up\': showText }" aria-hidden="true"></span></a> <a title="Kansallisbiografia" class="" ng-href="{{ ::person.kansallisbiografia }}"><span class="glyphicon glyphicon-book" aria-hidden="true"></span></a> <a title="Data" class="" ng-href="{{ ::person.id }}"><span class="glyphicon glyphicon-hdd" aria-hidden="true"></span></a> </div> </div> <div class="row"> <div ng-if="::person.hasAchievements" class="col-xs-6"> <a href="" class="link" ng-click="vm.getAchievements(person)" uib-popover-template="\'views/achievements-popover.html\'" popover-trigger="\'outsideClick\'" popover-append-to-body="true" popover-placement="auto right">Saavutukset</a> </div> <div ng-if="::person.wikipedia" class="col-xs-6"> <a ng-href="{{ ::person.wikipedia }}">Wikipedia</a> </div> <div ng-if="::person.wikidata" class="col-xs-6"> <a ng-href="{{ ::person.wikidata }}">Wikidata</a> </div> <div ng-if="::person.fennica[0]" class="col-xs-6"> <a ng-href="{{ ::person.fennica[0] }}">Fennica</a> </div> <div ng-if="::person.fennica[1]" class="col-xs-6"> <a ng-href="{{ ::person.fennica[1] }}">Fennica (2)</a> </div> <div ng-if="::person.warsampo" class="col-xs-6"> <a ng-href="http://www.sotasampo.fi/fi/persons/?uri={{ ::person.warsampo }}">Sotasampo</a> </div> <div ng-if="::person.norssi" class="col-xs-6"> <a ng-href="http://www.norssit.fi/semweb/#!/tiedot/http:~2F~2Fldf.fi~2Fnorssit~2F{{ ::person.norssi }}">Norssi</a> </div> <div ng-if="::person.kirjasampo" class="col-xs-6"> <a ng-href="{{ ::person.kirjasampo }}">Kirjasampo</a> </div> <div ng-if="::person.blf" class="col-xs-6"> <a ng-href="{{ ::person.blf }}">BLF</a> </div> <div ng-if="::person.ulan" class="col-xs-6"> <a ng-href="{{ ::person.ulan }}">ULAN</a> </div> <div ng-if="::person.viaf" class="col-xs-6"> <a ng-href="{{ ::person.viaf }}">VIAF</a> </div> <div ng-if="::person.norssit" class="col-xs-6"> <a ng-href="{{ ::person.norssit }}">Norssit</a> </div> <div ng-if="::person.eduskunta" class="col-xs-6"> <a ng-href="{{ ::person.eduskunta }}">Eduskunta</a> </div> <div ng-if="::person.website" class="col-xs-6"> <a ng-href="{{ ::person.website }}">Kotisivu</a> </div> <div ng-if="::person.genicom" class="col-xs-6"> <a ng-href="{{ ::person.genicom }}">Kotisivu (Geni.com)</a> </div> <div ng-if="::person.genitree" class="col-xs-6"> <a ng-href="{{ ::person.genitree }}">Sukupuu (Geni.com)</a> </div> </div> <div ng-if="::person.relative" class="row"> <div class="col-xs-12">Sukulaiset:</div> <div class="col-sm-6 col-md-12" ng-repeat="relative in person.relative | castArray"> {{ ::relative.type }} <a ui-sref="person.detail({ personId: relative.id })">{{ ::relative.name }}</a> </div> </div> <div ng-if="::person.hobby" class="row"> <div class="col-md-12"> <p>Harrastukset: {{ ::person.hobby | castArray | join: \', \' }}</p> </div> </div> <div uib-collapse="!showText"> <hr> <p ng-bind-html="::person.lead_paragraph"></p> </div> </div> </div> </div> </div> <div class="clearfix visible-lg-block" ng-if="($index + 1) % 4 == 0"></div> <div class="clearfix visible-md-block" ng-if="($index + 1) % 3 == 0"></div> <div class="clearfix visible-sm-block" ng-if="($index + 1) % 1 == 0"></div> <div class="clearfix visible-xs-block" ng-if="($index + 1) % 1 == 0"></div> </div> </div> </div>'),e.put("views/description.partial.html",'<h1>Semanttinen Kansallisbiografia</h1> <p> Kansallisbiografian matrikkelihaku. Voit rajata tulosta tekem√§ll√§ valintoja suodattimista ja selata henkil√∂ihin liittyv√§√§ tietoa linkkien kautta. L√§hde: <a href="http://www.kansallisbiografia.fi/">Biografiakeskus</a> </p>'),e.put("views/description.statistics.partial.html",'<h1>Semanttinen Kansallisbiografia</h1> <p> Aineistosta luotuja tilastoja. Esitykset luodaan vasemmanpuoleisissa suodattimissa tehtyjen valintojen perusteella. L√§hde: <a href="http://www.kansallisbiografia.fi">Biografiakeskus</a> </p>'),e.put("views/detail.html",'<div class="col-sm-12 col-md-8 text-center"> <div class="col-sm-12" ng-show="!vm.person && !vm.error"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif"> </div> <h1>{{ vm.person.givenName }} {{ vm.person.familyName }}</h1> <div class="thumbnail" ng-show="vm.person"> <div class="person-profile-img"> <div class="row"> <div class="col-sm-12 text-center"> <img ng-repeat="img in vm.person.images" class="person-img img img-responsive" ng-src="{{ img }}"> </div> </div> </div> <div class="caption" ng-show="vm.person"> <div class="visible-caption"> <div class="row"> <div class="col-xs-12"> <p ng-if="(vm.person.birthPlace || vm.person.birthDate || vm.person.deathDate)"> <span ng-if="(vm.person.birthPlace || vm.person.birthDate)">&#8727;&nbsp;{{ vm.person.birthPlace }} {{ vm.person.birthDate }}</span> <span ng-if="(vm.person.deathPlace || vm.person.deathDate)">&dagger;&nbsp;{{ vm.person.deathPlace }}</span> <span ng-if="vm.person.deathDate">{{ vm.person.deathDate }}</span> </p> </div> <div ng-if="vm.person.occupation" class="col-xs-12"> <p>{{ vm.person.occupation | castArray | join:\', \' }}</p> </div> <div class="col-xs-12 icon-menu"> <a title="Data" class="" ng-href="{{ vm.person.id }}"><span class="glyphicon glyphicon-hdd" aria-hidden="true"></span></a> </div> </div> <div class="row"> <div ng-if="vm.person.wikipedia" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.wikipedia }}">Wikipedia</a> </div> <div ng-if="vm.person.wikidata" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.wikidata }}">Wikidata</a> </div> <div ng-if="vm.person.fennica[0]" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.fennica[0] }}">Fennica</a> </div> <div ng-if="vm.person.fennica[1]" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.fennica[1] }}">Fennica (2)</a> </div> <div ng-if="vm.person.warsampo" class="col-xs-6 col-xs-offset-3"> <a ng-href="http://www.sotasampo.fi/fi/persons/?uri={{ vm.person.warsampo }}">Sotasampo</a> </div> <div ng-if="vm.person.kirjasampo" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.kirjasampo }}">Kirjasampo</a> </div> <div ng-if="vm.person.kulttuurisampo" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.kulttuurisampo }}">Kulttuurisampo</a> </div> <div ng-if="vm.person.blf" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.blf }}">BLF</a> </div> <div ng-if="vm.person.ulan" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.ulan }}">ULAN</a> </div> <div ng-if="vm.person.viaf" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.viaf }}">VIAF</a> </div> <div ng-if="vm.person.eduskunta" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.eduskunta }}">Eduskunta</a> </div> <div ng-if="vm.person.norssi" class="col-xs-6 col-xs-offset-3"> <a ng-href="http://www.norssit.fi/semweb/#!/tiedot/http:~2F~2Fldf.fi~2Fnorssit~2F{{ vm.person.norssi }}">Norssi</a> </div> <div ng-if="vm.person.website" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.website }}">Kotisivu</a> </div> <div ng-if="vm.person.genicom" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.genicom }}">Kotisivu (Geni.com)</a> </div> <div ng-if="vm.person.genitree" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.genitree }}">Sukupuu (Geni.com)</a> </div> </div> <div ng-if="vm.person.relative" class="row padded-row"> <div class="col-xs-12"><h4>Sukulaiset:</h4></div> <div class="col-sm-6 col-md-12" ng-repeat="relative in vm.person.relative | castArray"> <a ui-sref="person.detail({ personId: relative.id })">{{ relative.type }} {{ relative.name }}</a> </div> </div> <div ng-if="vm.person.hobby" class="row padded-row"> <div class="col-md-12"> <p><b>Harrastukset:</b> {{ vm.person.hobby | castArray | join: \', \' }}</p> </div> </div> <div class="col-sm-6 col-md-12" ng-repeat="bio in vm.person.bios | castArray"> <div ng-if="bio.database" class="entry-text text-left icon-menu"> <hr> <h4>{{ bio.database }} <a ng-if="bio.link" title="Artikkeli Biografiakeskuksen sivulla" class="" ng-href="{{ bio.link }}"> <span class="glyphicon glyphicon-book" aria-hidden="true"></span> </a></h4> </div> <div ng-if="bio.lead_paragraph" class="entry-text text-left"> <hr> <p ng-bind-html="bio.lead_paragraph"></p> </div> <div ng-if="bio.description" class="entry-text text-left"> <hr> <p ng-bind-html="bio.description"></p> </div> <div ng-if="bio.family_paragraph" class="entry-text text-left"> <hr> <p>{{ bio.family_paragraph }}</p> </div> <div ng-if="bio.parent_paragraph" class="entry-text text-left"> <hr> <h4>Vanhemmat</h4> <p>{{ bio.parent_paragraph }}</p> </div> <div ng-if="bio.spouse_paragraph" class="entry-text text-left"> <hr> <h4>Puoliso(t) vanhempineen</h4> <p>{{ bio.spouse_paragraph }}</p> </div> <div ng-if="bio.child_paragraph" class="entry-text text-left"> <hr> <h4>Lapset</h4> <p>{{ bio.child_paragraph }}</p> </div> <div ng-if="bio.medal_paragraph" class="entry-text text-left"> <hr> <h4>Kunniamerkit</h4> <p>{{ bio.medal_paragraph }}</p> </div> <div ng-if="bio.source_paragraph" class="entry-text text-left"> <hr> <p ng-bind-html="bio.source_paragraph"></p> </div> <div class="entry-text text-left"> <hr> <span ng-if="bio.author_text">Kirjoittaja(t): {{ bio.author_text }}. </span> <span ng-if="bio.created">Julkaistu {{ bio.created | date:\'dd.MM.yyyy\' }}</span> <span ng-if="bio.modified">(p√§ivitetty {{ bio.modified | date:\'dd.MM.yyyy\' }})</span> </div> <hr> </div> </div> </div> </div> </div> <div class="col-md-4 text-left" ng-if="vm.person.similar"> <h3>Samankaltaisia henkil√∂it√§</h3> <img ng-if="!vm.person.similar" class="loading-img" src="images/loading-lg.7ba320e0.gif"> <div class="col-sm-6" ng-repeat="person in vm.person.similar"> <a ui-sref="person.detail({ personId: person.prs })">{{ person.label }}</a> </div> </div>  '),e.put("views/facets.partial.html",'<a href="" ng-click="vm.removeFacetSelections()">Poista kaikki valinnat</a> <div class="facets"> <seco-jena-text-facet data-options="vm.facets.entryText"></seco-jena-text-facet> <div class="show-facets row"> <div class="col-xs-12"> <button class="btn btn-default pull-right visible-xs-block visible-sm-block" ng-click="show = !show">{{ show ? \'Piilota fasetit\' : \'N√§yt√§ fasetit\' }}</button> </div> </div> <div class="hideable-facets" ng-class="{ \'hidden-sm hidden-xs\': !show }"> <seco-basic-facet data-options="vm.facets.dataset"></seco-basic-facet> <seco-checkbox-facet data-options="vm.facets.link"></seco-checkbox-facet> <seco-slider-facet data-options="vm.facets.birthYear"></seco-slider-facet> <seco-basic-facet data-options="vm.facets.period"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.familyName"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.gender"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.author"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.category"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.company"></seco-basic-facet> <seco-hierarchy-facet data-options="vm.facets.title"></seco-hierarchy-facet> <seco-basic-facet data-options="vm.facets.place"></seco-basic-facet> \x3c!-- \n    <seco-basic-facet data-options="vm.facets.deathYear"></seco-basic-facet> --\x3e </div> </div>'),e.put("views/groupmap.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12" ng-show="!vm.markers && !vm.error"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif"> </div> <div uib-alert ng-if="vm.error"> {{ vm.error }} </div> <div class="container-fluid text-center"> Kartalla n√§ytet√§√§n henkil√∂iden <span style="color:#777fff">synnyin-</span> ja <span style="color:#ff4141">kuolin</span>paikat. Esitys luodaan vasemmanpuoleisissa suodattimissa tehtyjen valintojen perusteella. L√§hde: <a href="http://www.kansallisbiografia.fi">Kansallisbiografia</a> <div class="container-fluid thumbnail"> <div class="col-md-4 pull-md-4 col-lg-3"> <seco-slider-facet data-options="vm.facets.slider"></seco-slider-facet> <div ng-include="\'views/mapfacets.partial.html\'"></div> </div> <div class="container-fluid thumbnail"> <div class="col-md-8 col-lg-9"> <ui-gmap-google-map id="ui-gmap-google-map" center="vm.map.center" zoom="vm.map.zoom"> <ui-gmap-window id="ui-gmap-window" show="vm.window.show" options="vm.window" templateurl="\'views/groupmap.popup.html\'" templateparameter="vm" closeclick="vm.closeWindow"> <span></span> </ui-gmap-window> <ui-gmap-marker ng-repeat="marker in vm.markers" coords="marker" idkey="marker.id" options="marker.options" click="marker.onClick()"></ui-gmap-marker> </ui-gmap-google-map> </div> </div> </div> </div> </div></div>'),e.put("views/groupmap.popup.html",'<div class="map-popup"> <div id="popupcontainer" class="col-sm-4 col-md-2 text-center"> <h3 ng-show="parameter.place_label">{{ parameter.place_label }}</h3> <ul class="list-group row list-group-persons ng-scope" id="popupcontainer2"> <li class="list-group-item col-xs-6 ng-scope" ng-show="parameter.people" ng-repeat="person in parameter.people"> <a ui-sref="person.detail({ personId: person.uri })">{{ person.label }}</a> </li> </ul> </div> </div>'),e.put("views/help.html",'<div class="modal-header"> <div class="row"> <div class="col-xs-10 text-left"> <h3 class="modal-title">Kansallisbiografia</h3> </div> <div class="col-xs-2"> <a href="#" ng-click="$close()" class="no-decoration btn-lg pull-right glyphicon glyphicon-remove"></a> </div> </div> </div> <div class="modal-body"> <p>Matrikkelin tietoja voi selata k√§ytt√∂liittym√§ss√§ k√§ytt√§m√§ll√§ vasemmalla olevia suodattimia. </p> <p>Hakeaksesi rekisterist√§ tekstihaulla, kirjoita hakutermit ylimp√§n√§ olevaan \'Haku\'-kentt√§√§n. <br>Poistaaksesi hakurajauksen, paina X-nappia hakukent√§n oikealla puolella.</p> <p>Jokaisella suodattimella on oma hakukentt√§ sek√§ lista suodattimen vaihtoehdoista, josta voi valita haluamansa ehdon. Valitun ehdon antamien tulosten m√§√§r√§ n√§kyy suluissa valinnan nimen per√§ss√§. Rajauksen voi poistaa valitsemalla vaihtoehdon \'-- Ei valintaa --\'.</p> <p>Kustakin suodattimesta voi valita vain yhden vaihtoehdon, jolloin henkil√∂listausta suodatetaan t√§m√§n vaihtoehdon perusteella. Useita eri suodattimia voi k√§ytt√§√§ samanaikaisesti. </p> <p> <h4>Suodattimien valinta:</h4> <ol> <li>Valitse joku suodattimista ja avaa suodatin painamalla \'+\'-nappia suodattimen otsikon oikealla puolella.</li> <li>Valitse suodattimeen arvo listalta tai hae kirjoittamalla listan yll√§ olevaan tekstikentt√§√§n. Jos suodatinehtoa haetaan tekstikent√§n avulla alla oleva lista suodattimista p√§ivittyy kirjoittaessa.</li> <li>Suodatinehdon voi valita klikkaamalla sit√§ listalta, tai poistaa valitsemalla \'-- Ei valintaa --\' listan alusta. </li> <li>Henkil√∂iden lista p√§ivittyy suodattimien oikealla puolella.</li> <li>Tuloksia voi nyt suodattaa tarvittaessa lis√§√§ toistamalla toisella suodattimella edelliset askeleet 1-4.</li> </ol> </p> </div>'),e.put("views/login.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12"> <h1>Kirjaudu</h1> <div ng-show="vm.error" class="alert alert-danger" role="alert">{{ vm.error }}</div> <form> <div class="form-group"> <label for="un">K√§ytt√§j√§tunnus</label> <input ng-model="vm.un" type="text" class="form-control" id="un" placeholder="Username"> </div> <div class="form-group"> <label for="pw">Salasana</label> <input ng-model="vm.pw" type="password" class="form-control" id="pw" placeholder="Password"> </div> <button ng-click="vm.login()" type="submit" class="btn btn-default">Submit</button> </form> </div> </div> </div>'),e.put("views/map.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12" ng-show="!vm.person && !vm.error"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif"> </div> <div uib-alert ng-if="vm.error"> {{ vm.error }} </div> <div class="container-fluid text-center" ng-show="vm.person"> <h1>{{ vm.person.givenName }} {{ vm.person.familyName }}</h1> <div class="container-fluid thumbnail"> <div> <div id="labelcontainer" class="col-sm-4 col-md-2 text-center" ng-show="vm.person"> <p ng-repeat="event in ::vm.events" class="{{event.class}}" ng-mouseenter="vm.focusEvent(event)" ng-mouseleave="vm.unfocusEvent(event)"> <a ng-if="::event.relative" ui-sref="person.detail({ personId: event.relative })"> {{ event.id }}: {{ event.label }}</a> <span ng-if="::!event.relative">{{ event.id }}: {{ event.label }}</span> </p> </div> </div> <div class="col-sm-12 col-md-10 text-center"> <ui-gmap-google-map id="ui-gmap-google-map" center="vm.map.center" zoom="vm.map.zoom"> <ui-gmap-marker ng-repeat="marker in vm.markers" coords="marker" idkey="marker.id" options="marker.options"></ui-gmap-marker> </ui-gmap-google-map> <svg id="timelinecontainer" viewbox="-15,-7,120,27" preserveaspectratio="none" version="1.0" x="0" y="0" width="900" height="180" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <line ng-repeat="line in ::vm.mainline.lines" ng-attr-x1="{{ line.x1 }}" ng-attr-x2="{{ line.x2 }}" ng-attr-y1="{{ line.y1 }}" ng-attr-y2="{{ line.y2 }}"> </line> <text ng-repeat="text in ::vm.mainline.texts" ng-attr-x="{{ text.x }}" ng-attr-y="{{ text.y }}"> {{ text.content }} </text> <path ng-repeat="event in vm.events" ng-mouseenter="vm.focusEvent(event)" ng-mouseleave="vm.unfocusEvent(event)" class="{{ event.class }}" ng-attr-d="{{ event.path }}"> </path> </svg> <p> <span>{{ vm.currentEvent }}</span> </p> </div> </div> </div> </div> </div>'),e.put("views/mapfacets.partial.html",'<a href="" ng-click="vm.removeFacetSelections()">Poista kaikki valinnat</a> <div class="facets"> <seco-jena-text-facet data-options="vm.facets.entryText"></seco-jena-text-facet> <div class="show-facets row"> <div class="col-xs-12"> <button class="btn btn-default pull-right visible-xs-block visible-sm-block" ng-click="show = !show">{{ show ? \'Piilota fasetit\' : \'N√§yt√§ fasetit\' }}</button> </div> </div> <div class="hideable-facets" ng-class="{ \'hidden-sm hidden-xs\': !show }"> <seco-checkbox-facet data-options="vm.facets.link"></seco-checkbox-facet> \x3c!--  <seco-basic-facet data-options="vm.facets.occupation"></seco-basic-facet> \n    <seco-basic-facet data-options="vm.facets.period"></seco-basic-facet> --\x3e <seco-basic-facet data-options="vm.facets.gender"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.dataset"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.author"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.category"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.company"></seco-basic-facet> <seco-hierarchy-facet data-options="vm.facets.title"></seco-hierarchy-facet> <seco-basic-facet data-options="vm.facets.place"></seco-basic-facet> </div> </div>'),e.put("views/nlp.comparison.html",'<div class="row"> <div class="col-sm-6 comparison comparison-left" ui-view="left"></div> <div class="col-sm-6 comparison comparison-right" ui-view="right"></div> </div>'),e.put("views/nlp.comparison.left.html",'<div class="row"> <div class="col-sm-4"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-sm-8" min-height="500"> <div ng-include="\'views/nlp.results.partial.html\'"></div> </div> </div>'),e.put("views/nlp.comparison.right.html",'<div class="row"> <div class="col-sm-8" min-height="500"> <div ng-include="\'views/nlp.results.partial.html\'"></div> </div> <div class="col-sm-4"> <div ng-include="\'views/facets.partial.html\'"></div> </div> </div>'),e.put("views/nlp.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive"> </div>\x3c!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --\x3e<div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/description.statistics.partial.html\'"></div> <span><b>N√§kym√§:</b> <a ui-sref-active="active" ui-sref="nlp.statistics">Tilastoja</a> | <a ui-sref-active="active" ui-sref="nlp.comparison.sides">Vertailu</a> </span> </div> <div ui-view></div> </div> </div>'),e.put("views/nlp.results.partial.html",'<div ng-show="vm.error" class="comparison-result-error alert alert-danger" role="alert"> {{ vm.error.statusText }} </div> <div ng-show="vm.hasResults()" class="col-md-3 col-sm-2" ng-repeat="upos in vm.upos"> <table class="comparison-results"> <colgroup> <col class="word"> <col class="count"> </colgroup> <th>{{ upos.label }}</th> <th>Lkm</th> <tr ng-repeat="word in vm.results[upos.key]"> <td>{{ word.lemma }}</td> <td>{{ word.count }}</td> </tr> </table> </div> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults">'),e.put("views/nlp.statistics.html",'<div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10" min-height="500"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div id="biography-chart"></div> <div ng-include="\'views/nlp.results.partial.html\'"></div> </div>'),e.put("views/page-modal.html",'<div class="modal-header"> <div class="row"> <div class="col-xs-8"> <h3 class="modal-title">{{ $ctrl.person.ordinal }} {{ $ctrl.person.givenName }} {{ $ctrl.person.familyName }}</h3> </div> <div class="col-xs-4 text-right"> <button class="btn btn-default" ng-click="$ctrl.previousPage()" ng-disabled="$ctrl.pageNo === 1" aria-label="Edellinen sivu"> <span class="glyphicon glyphicon-step-backward"></span> </button> <span>{{ $ctrl.pageNo }}</span> <button class="btn btn-default" ng-click="$ctrl.nextPage()" ng-disabled="$ctrl.pageNo === 716" aria-label="Seuraava sivu"> <span class="glyphicon glyphicon-step-forward"></span> </button> <button ng-click="$ctrl.close()" class="btn btn-default" aria-label="Sulje"> <span aria-hidden="true" class="glyphicon glyphicon-remove"></span> </button> </div> </div> </div><div class="modal-body"> <img class="img img-responsive" ng-src="{{ $ctrl.pageUrl }}"> </div>'),e.put("views/person.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12"> <ul class="nav nav-tabs"> <li ui-sref="person.detail" ui-sref-active="active"> <a href=""><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Henkil√∂n tiedot</a> </li> <li ui-sref="person.map" ui-sref-active="active"> <a href=""><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span> Aikajana</a> </li> </ul> </div> </div> <div class="row"> <div ui-view></div> </div> </div>'),e.put("views/place.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12"> <h1>{{ vm.place.label }}</h1> </div> </div> <div class="col-md-8"> <div id="linkContent"> <ws-related-links data-title="\'Syntyneet\'" data-related="vm.place.born"></ws-related-links> <ws-related-links data-title="\'Tapahtumat\'" data-related="vm.place.event"></ws-related-links> <ws-related-links data-title="\'Kuolleet\'" data-related="vm.place.died"></ws-related-links> </div> </div> </div>'),e.put("views/profile-image-popover.html",'<div> <img class="img img-responsive" ng-src="{{ img }}"> </div>'),e.put("views/sliderFacet.directive.html",'<seco-facet-wrapper> <rzslider rz-slider-model="vm.facet.slider.minValue" rz-slider-high="vm.facet.slider.maxValue" rz-slider-options="vm.facet.slider.options"></rzslider> </seco-facet-wrapper>'),e.put("views/subnavbar.html",'<ul class="nav navbar-nav"> <li><a href="" id="show-help" ng-click="vm.showHelp()"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> Ohje</a></li> \x3c!-- \n  <li ui-sref-active="active"><a ui-sref="cards"><span class="glyphicon glyphicon-th" aria-hidden="true"></span> Ruudukko</a></li>\n  <li ui-sref-active="active"><a ui-sref="table"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span> Lista</a></li>\n   --\x3e <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="" id="personsearch"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Henkil&ouml;haku<span class="caret"></span></a> <ul class="dropdown-menu"> <li ui-sref-active="active"><a ui-sref="cards"><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Ruudukko</a></li> <li ui-sref-active="active"><a ui-sref="table"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Lista</a></li> </ul> </li> <li ui-sref-active="active"><a ui-sref="groupmap"><span class="glyphicon glyphicon glyphicon-globe" aria-hidden="true"></span> Kartta</a></li> <li ui-sref-active="active"><a ui-sref="visualizations.visu2"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Tilastoja</a></li> <li ui-sref-active="{ active: \'nlp.**\' }"><a ui-sref="nlp.statistics"><span class="glyphicon glyphicon-book" aria-hidden="true"></span> Kielianalyysi</a></li> </ul>'),e.put("views/table.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive"> </div>\x3c!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --\x3e<div class="col-xs-8 col-md-7 col-lg-8 vcenter push-xs-8"> <div ng-include="\'views/description.partial.html\'"></div> </div> <div class="col-md-4 pull-md-4 col-lg-3"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-8 col-lg-9"> J√§rjest√§: <span class="sort"> <a href="" ng-click="vm.sortBy(\'?ordinal\')">Aikaj√§rjestys</a> <span ng-class="vm.getSortClass(\'?ordinal\', true)" class="glyphicon" aria-hidden="true"></span> </span> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?familyName\')">Sukunimi</a> <span ng-class="vm.getSortClass(\'?familyName\')" class="glyphicon" aria-hidden="true"></span> </span> <div ng-include="\'views/table.partial.html\'"></div> </div> </div> </div>'),e.put("views/table.partial.html",'<table class="table table-striped norssi-table ng-table-responsive" ng-table="vm.tableParams"> <thead> <tr> <th class="col-xs-4">Nimi</th> <th class="col-xs-1">Henkil√∂</th> <th class="col-xs-1">Linkit</th> \x3c!-- <th class="col-xs-3"><span class="hidden-xs hidden-sm">Muuta</span></th>  --\x3e <th class="col-xs-3 hidden-xs hidden-sm">Matrikkeliteksti</th> </tr> </thead> <tbody> <tr ng-show="!vm.isLoadingResults" ng-repeat="person in $data"> <td class="person-image-container" data-title="\'Nimi\'"> <div ng-class="::{ \'name-col col-md-12 col-lg-7\': person.images }"> <b><a ui-sref="person.detail({ personId: person.id })">{{ ::person.givenName }} {{ ::person.familyName }}</a></b><br> <span ng-if="::(person.birthDate)">&#8727;&nbsp;{{ ::person.birthPlace }} {{ ::person.birthDate }}</span> <span ng-if="::person.deathDate">&dagger;&nbsp;{{ ::person.deathPlace }} {{ ::person.deathDate }}</span> <br> <span class="icon-menu"> <a title="Kansallisbiografia" class="" ng-href="{{ ::person.kansallisbiografia }}"><span class="glyphicon glyphicon-book" aria-hidden="true"></span></a> <a title="Data" class="" ng-href="{{ ::person.id }}"><span class="glyphicon glyphicon-hdd" aria-hidden="true"></span></a> </span> </div> <div ng-if="::person.hasImage" class="name-col col-md-12 col-lg-5"> <div ng-repeat="img in ::person.images" ng-class="{ \'col-md-12\': ($first && $last), \'col-sm-6\': !($first && $last) }" class="person-img-col vcenter"> <img uib-popover-template="\'views/profile-image-popover.html\'" popover-trigger="\'mouseenter\'" popover-placement="auto right" popover-append-to-body="true" class="person-image img img-responsive" ng-src="{{ img  }}"> </div> </div> </td> <td class="links" data-title="\'Henkil√∂\'"> <div ng-if="::person.occupation" class="hidden-xs hidden-sm"> <p>{{ ::person.occupation | castArray | join:\', \' }}</p> </div> </td> <td class="links" data-title="\'Linkit\'"> <div ng-if="::person.achievement"> <a href="" uib-popover-template="\'views/achievements-popover.html\'" popover-trigger="\'outsideClick\'" popover-append-to-body="true" popover-placement="auto top">Saavutukset</a> </div> <a class="link" ng-if="::person.wikipedia" ng-href="{{ ::person.wikipedia }}">Wikipedia</a> <a class="link" ng-if="::person.warsa" ng-href="http://www.sotasampo.fi/fi/persons/?uri={{ ::person.warsa }}">Sotasampo</a> <a class="link" ng-if="::person.fennica[0]" ng-href="{{ ::person.fennica[0] }}">Fennica</a> <a class="link" ng-if="::person.fennica[1]" ng-href="{{ ::person.fennica[1] }}">Fennica (2)</a> <a class="link" ng-if="::person.kirjasampo" ng-href="{{ ::person.kirjasampo }}">Kirjasampo</a> <a class="link" ng-if="::person.kulttuurisampo" ng-href="{{ ::person.kulttuurisampo }}">Kulttuurisampo</a> <a class="link" ng-if="::person.blf" ng-href="{{ ::person.blf }}">BLF</a> <a class="link" ng-if="::person.ulan" ng-href="{{ ::person.ulan }}">ULAN</a> <a class="link" ng-if="::person.viaf" ng-href="{{ ::person.viaf }}">VIAF</a> <a class="link" ng-if="::person.norssi" ng-href="http://www.norssit.fi/semweb/#!/tiedot/http:~2F~2Fldf.fi~2Fnorssit~2F{{ ::person.norssi }}">Norssi</a> <a class="link" ng-if="::person.eduskunta" ng-href="{{ ::person.eduskunta }}">Eduskunta</a> <a class="link" ng-if="::person.website" ng-href="{{ ::person.website }}">Kotisivu</a> <a class="link" ng-if="::person.genicom" ng-href="{{ ::person.genicom }}">Kotisivu (Geni.com)</a> <a class="link" ng-if="::person.genitree" ng-href="{{ ::person.genitree }}">Sukupuu (Geni.com)</a> </td> \x3c!-- \n    <td data-title="\'Muuta\'">\n      <div ng-if="::person.relative">\n      \t<span>Sukulaiset: </span><br>\n      \t<span ng-repeat="relative in person.relative | castArray">\n          {{ ::relative.type }} <a ui-sref="person.detail({ personId: relative.id })">{{ ::relative.name }}</a>\n      \t</span>\n      </div>\n      <div ng-if="::person.hobby"><span>Harrastukset: </span><br>{{ ::person.hobby | join:\', \' }}</div>\n    </td>\n     --\x3e <td data-title="\'Matrikkeliteksti\'" class="hidden-xs hidden-sm"><p ng-bind-html="::person.lead_paragraph"></p></td> </tr> </tbody> </table> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults">'),e.put("views/title.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12"> <h1>{{ vm.title.label }}</h1> Under Construction </div> </div> <div class="row"> <div ui-view></div> </div> </div>'),e.put("views/visu.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive"> </div>\x3c!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --\x3e<div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/description.statistics.partial.html\'"></div> </div> <div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10" min-height="500"> Ty√∂n alla - under construction <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div id="chart_education" style="width: 100%; height: 500px"></div> <div id="chart_eduorganization" style="width: 100%; height: 500px"></div> <div id="chart_occupation" style="width: 100%; height: 500px"></div> <div id="chart_organization" style="width: 100%; height: 500px"></div> <p style="font-family: Arial; font-size:15px; color:black"><strong>Oppilaitoksista saatuja oppiarvoja</strong></p> <div id="chart_sankey" style="width: 100%; height: 700px"></div> </div> </div> </div>'),e.put("views/visu.popup.html",'<div class="modal-header"> <h3>Henkil&ouml;t</h3> <ul class="list-group row list-group-persons ng-scope" id="popupcontainer2"> <li class="list-group-item col-xs-6 ng-scope" ng-show="vm.people" ng-repeat="person in vm.people"> <a ui-sref="person.detail({ personId: person.uri })">{{ person.name }}</a> </li> </ul> </div>'),e.put("views/visu2.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-2 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="images/SKB.6aa384d7.svg" class="norssi-logo center-block img img-responsive"> </div>\x3c!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --\x3e<div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/description.statistics.partial.html\'"></div> </div> <div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10" min-height="500"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div id="chart_age"></div> <div id="chart_marriageAge"></div> <div id="chart_firstChildAge"></div> <div id="chart_numberOfChildren"></div> <div id="chart_numberOfSpouses"></div> \x3c!-- \n         <div id="chart_matriculationYear"></div>\n         <div id="chart_topschools" style="width: 100%; height: 500px;"></div>\n         <div id="chart_toporganization" style="width: 100%; height: 500px;"></div>\n         <div id="chart_topeducation" style="width: 100%; height: 500px;"></div>\n          --\x3e </div> </div> </div>')}]);
<div class="container-fluid">
  <div class="row">
    <div uib-alert ng-if="vm.error">
      {{ vm.error }}
    </div>
    <div class="col-md-4 pull-md-4 col-lg-3">
	    <h1>Tutki elämäkertoja kartoilla</h1>
	    <p><b>Näkymä:</b>
	        <a ui-sref-active="active" ui-sref="groupmap.singleview">Tapahtumakartta</a> |
	        <a ui-sref-active="active" ui-sref="groupmap2">Liikekartta</a>
	    </p>
	    <p>
	    Kartalla yhdistetään henkilöiden synnyin- ja kuolinpaikat nuolilla. 
	    Alapuoleisilla suodattimilla voidaan rajata haluttu henkilöryhmä.
	    </p>
	    Näytä kartalla korkeintaan 
			<select ng-model="vm.SEARCHLIMIT" 
					ng-options="item.value for item in vm.limitoptions"
					ng-change="vm.change()">
      		</select> tulosta.
      	<br/>
	    <span ng-if="vm.message" style="color:#ff4141">{{ vm.message }}<br/><br/></span>
	    
      	<div ng-include="'views/mapfacets.partial.html'"></div>
    </div>
    <div class="container-fluid">
    	<div class="col-md-8 col-lg-9">
    		<div class="col-sm-12 mapspinner" ng-show="vm.isLoadingResults && !vm.error" >
		      <img class="loading-img" src="images/loading-lg.gif"></img>
			</div>
		   <ui-gmap-google-map id="ui-gmap-google-map" center='vm.map.center' zoom='vm.map.zoom'>
		   		
		   		<ui-gmap-window 
		   			id="ui-gmap-window" 
		   			show="vm.window.show" 
		   			options="vm.window" 
		   			templateUrl="'views/groupmap.popup.html'"
                    templateParameter="vm"
            		closeClick="vm.closeWindow">
            		<span></span>
        		</ui-gmap-window>
        		
		   		<ui-gmap-polyline static="true" visible="true" geodesic="true" 
		   			ng-repeat="p in vm.polylines" path="p.path" stroke="p.stroke" icons="p.icons" events="p.events">
		   		</ui-gmap-polyline>
	        	
	        </ui-gmap-google-map>
	        
	      </div>
      </div>
    </div>
  </div>